<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-visionary-render-programming/shaders/surface-shaders" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Surface Shaders | Virtalis Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.virtalis.com/visionary-render-programming/shaders/surface-shaders"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Surface Shaders | Virtalis Docs"><meta data-rh="true" name="description" content="Surface Shaders allow custom shading to be applied to visuals within the scene. When a surface shader is applied to a material, all visuals using that material will run the custom shader when rendering."><meta data-rh="true" property="og:description" content="Surface Shaders allow custom shading to be applied to visuals within the scene. When a surface shader is applied to a material, all visuals using that material will run the custom shader when rendering."><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.virtalis.com/visionary-render-programming/shaders/surface-shaders"><link data-rh="true" rel="alternate" href="https://docs.virtalis.com/visionary-render-programming/shaders/surface-shaders" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.virtalis.com/visionary-render-programming/shaders/surface-shaders" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.51041b06.css">
<script src="/assets/js/runtime~main.b256f5d1.js" defer="defer"></script>
<script src="/assets/js/main.1b2c84ee.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="35" height="30" viewBox="0 0 35 30" aria-hidden="true"><path stroke="white" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/assets/logos/virtalis-docs.svg" alt="Virtalis Docs Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" width="184"><img src="/assets/logos/virtalis-docs.svg" alt="Virtalis Docs Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="184"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Manuals</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/importers-and-exporters/introduction">Importers and Exporters</a></li><li><a class="dropdown__link" href="/virtalis-hub-and-web-viewer/introduction">Virtalis Hub and Web Viewer</a></li><li><a class="dropdown__link" href="/visionary-render/introduction">Visionary Render</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Guides</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/virtalis-hub-system-admin/introduction">Virtalis Hub System Admin</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/visionary-render-programming/introduction">Visionary Render Programming</a></li></ul></div><a class="navbar__item navbar__link" href="/changelogs">Changelogs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_MW0i colorModeToggle_DEke"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="" aria-label="" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_SFTY"><path fill="white" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_ekgs"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Visionary Render Programming</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/visionary-render-programming/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/visionary-render-programming/architecture/api-diagram">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/visionary-render-programming/scripts/introduction">Scripts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/visionary-render-programming/plugins/introduction">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/visionary-render-programming/shaders/introduction">Shaders</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/visionary-render-programming/shaders/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/visionary-render-programming/shaders/surface-shaders">Surface Shaders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/visionary-render-programming/shaders/view-shaders">View Shaders</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/visionary-render-programming/reference/c-api/classes/metanodes/meta-animation-action">Reference</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Visionary Render Programming</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Shaders</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Surface Shaders</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Surface Shaders</h1></header>
<p>Surface Shaders allow custom shading to be applied to visuals within the scene. When a surface shader is applied to a material, all visuals using that material will run the custom shader when rendering.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-assemblies">Creating the assemblies<a href="#creating-the-assemblies" class="hash-link" aria-label="Direct link to Creating the assemblies" title="Direct link to Creating the assemblies">​</a></h2>
<p>There are two Surface Shader assemblies that can be created under a Library assembly in the Developer tree view:</p>
<ul>
<li><strong>Surface Shader Definition</strong>: This is the script&#x27;s assembly which should be created first. Double-click to open in the Script Editor.</li>
<li><strong>Surface Shader Instance</strong>: This assembly contains one property, which is a reference to the <em>Surface Shader Definition</em> of which it is an instance of. This is what gets added to a material to trigger the surface shader defined in the definition to be used in-place of the material.</li>
</ul>
<p>A shader definition is the first thing which should be created, and provides the base object which a surface shader instance will reference. After creating a defintion, an instance can be created in a couple of ways:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-click-and-drag-a-surface-shader-definition-on-to-an-object-in-the-scene">1. Click and drag a surface shader definition on to an object in the scene.<a href="#1-click-and-drag-a-surface-shader-definition-on-to-an-object-in-the-scene" class="hash-link" aria-label="Direct link to 1. Click and drag a surface shader definition on to an object in the scene." title="Direct link to 1. Click and drag a surface shader definition on to an object in the scene.">​</a></h4>
<p><img decoding="async" loading="lazy" src="/assets/images/surface-shader-click-drag-apply-91ddf3bebcb6c9fc6399aae1c45917d5.png" width="751" height="237" class="img_ev3q"></p>
<p>This will create a surface shader instance as a child of that object&#x27;s assigned material, with its Surface Shader property already referencing the definition.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/surface-shader-instance-applied-1709012debf60cd7ec9bf24873039013.png" width="440" height="395" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-right-click-on-a-material-and-select-create---surface-shader-instance">2. Right-Click on a Material and select &quot;Create -&gt; Surface Shader Instance&quot;.<a href="#2-right-click-on-a-material-and-select-create---surface-shader-instance" class="hash-link" aria-label="Direct link to 2. Right-Click on a Material and select &quot;Create -&gt; Surface Shader Instance&quot;." title="Direct link to 2. Right-Click on a Material and select &quot;Create -&gt; Surface Shader Instance&quot;.">​</a></h4>
<p><img decoding="async" loading="lazy" src="/assets/images/surface-shader-create-e17dd136413128fa80bd3414aef9369f.png" width="550" height="268" class="img_ev3q"></p>
<p>Then, ensure the &quot;Surface Shader&quot; property references the desired definition.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="writing-the-shader">Writing the Shader<a href="#writing-the-shader" class="hash-link" aria-label="Direct link to Writing the Shader" title="Direct link to Writing the Shader">​</a></h2>
<p>After creating and opening a surface shader definition, use the following guide to get started with creating a custom surface shader. Note: Surface Shaders are written in OpenGL Shading Language (GLSL) and so prior knowledge is desirable.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="surface">surface()<a href="#surface" class="hash-link" aria-label="Direct link to surface()" title="Direct link to surface()">​</a></h3>
<p>The surface function gives the ability to modify the properties of a fragment before any lighting calculations are performed. It must take the following form:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">surface</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SurfaceInput i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">inout</span><span class="token plain"> SurfaceOutput o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">albedo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That simple function will set the albedo of the fragment to red. The <em>SurfaceInput</em> parameter contains data about the current fragment being processed which may be useful in creating a surface shader. The <em>SurfaceOutput</em> parameter is where the desired surface details should be written out to.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="surfaceinput">SurfaceInput<a href="#surfaceinput" class="hash-link" aria-label="Direct link to SurfaceInput" title="Direct link to SurfaceInput">​</a></h4>
<p>This structure contains data about the current fragment which may come in handy for creating a desired shader. Following is a list of all the possible members of this structure:</p>
<table><thead><tr><th><strong>Name</strong></th><th><strong>Type</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><em>position</em></td><td><em>vec3</em></td><td><em>The eye-space position.</em></td></tr><tr><td><em>normal</em></td><td><em>vec3</em></td><td><em>The eye-space normal.</em></td></tr><tr><td>tangent</td><td>vec3</td><td>The eye-space tangent.</td></tr><tr><td>bitangent</td><td>vec3</td><td>The eye-space bitangent.</td></tr><tr><td>uv0</td><td>vec2</td><td>The UV value of TexCoord0.</td></tr><tr><td>uv1</td><td>vec2</td><td>The UV value of TexCoord1.</td></tr><tr><td>uv2</td><td>vec2</td><td>The UV value of TexCoord2.</td></tr><tr><td>uv3</td><td>vec2</td><td>The UV value of TexCoord3.</td></tr><tr><td>alpha</td><td>float</td><td>Alpha value, describes opacity.</td></tr><tr><td>reflection</td><td>vec3</td><td>Eye-space reflection vector for the fragment. <em><strong>[Available in surface() only]</strong></em></td></tr><tr><td>direction</td><td>vec3</td><td>View direction for the fragment. <em><strong>[Available in surface() only]</strong></em></td></tr><tr><td>position_world</td><td>vec3</td><td>World-Space position of the vertex. <em><strong>[Available in vertex() only]</strong></em></td></tr><tr><td>position_model</td><td>vec3</td><td>Model-Space position of the vertex. <em><strong>[Available in surface() only]</strong></em></td></tr></tbody></table>
<p>By default, nothing needs to be done to gain access to <em>position</em> and <em>normal</em>. However, to access any of the other members they must be declared within a SurfaceInput struct definition as below:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">SurfaceInput</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec3</span><span class="token plain"> tangent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec2</span><span class="token plain"> uv0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">float</span><span class="token plain"> alpha</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Putting the above in our file (before any of the data members are used) will give us access to <em>tangent, uv0,</em> and <em>alpha</em> from the <em>SurfaceInput</em> object passed into <em>vertex()</em> and/or <em>surface()</em>. It does not matter that <em>position</em> and <em>normal</em> are missing from this definition, these will be added behind the scenes and so will still be available in the shader.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="surfaceoutput">SurfaceOutput<a href="#surfaceoutput" class="hash-link" aria-label="Direct link to SurfaceOutput" title="Direct link to SurfaceOutput">​</a></h4>
<p>This structure is used as the output of the surface( ) function. Following is a list of all the data members available for writing out to.</p>
<table><thead><tr><th><strong>Name</strong></th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>position</td><td>vec3</td><td>Eye-space position passed on to the remaining shader pipeline to undergo lighting.</td></tr><tr><td>normal</td><td>vec3</td><td>Eye-space normal passed on to the remaining shader pipeline to undergo lighting.</td></tr><tr><td>albedo</td><td>vec3</td><td>Surface albedo used for lighting calculations.</td></tr><tr><td>emissive</td><td>vec3</td><td>Emissive output from the surface.</td></tr><tr><td>smoothness</td><td>float</td><td>Adjusts how smooth the material&#x27;s surface appears, 0 being very rough and 1 being perfectly smooth.</td></tr><tr><td>reflectivity</td><td>float</td><td>A value from 0 to 1 representing the amount of light that is reflected.</td></tr><tr><td>metalness</td><td>float</td><td>A value from 0 to 1 representing how metallic the surface is.</td></tr><tr><td>ambient</td><td>float</td><td>How much to scale ambient lighting for this surface.</td></tr><tr><td>alpha</td><td>float</td><td>Adjusts the translucency of the surface.</td></tr><tr><td>IBL</td><td>float</td><td>Set to 0.0 or 1.0 to either disable/enable Image-Based Lighting for this surface fragment.</td></tr></tbody></table>
<p>Unlike with SurfaceInput, we do not need to define this structure within our file; all of the data members are available for reading/writing within the surface( ) function.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="litsurface">litSurface()<a href="#litsurface" class="hash-link" aria-label="Direct link to litSurface()" title="Direct link to litSurface()">​</a></h3>
<p>When the aforementioned <em>surface()</em> function is declared,  the contents of the output structure <em>SurfaceOutput</em> goes on to get passed through the renderers lighting path. This may not be desirable if custom lighting has already been applied (such as using <em>evalLighting()</em> described later), this is where <em>litSurface()</em> comes in. It is used in place of the <em>surface()</em> function and uses the new structure <em>LitFragment</em> for its output:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">litSurface</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SurfaceInput i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">inout</span><span class="token plain"> LitFragment o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">colour </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="litfragment">LitFragment<a href="#litfragment" class="hash-link" aria-label="Direct link to LitFragment" title="Direct link to LitFragment">​</a></h4>
<p>As previously mentioned this structure is used to store the output of the litSurface() function. Unlike SurfaceOutput it only has two members:</p>
<table><thead><tr><th><strong>Name</strong></th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>colour</td><td>vec4</td><td>The final desired colour of this surface, where the alpha channel controls the translucency.</td></tr><tr><td>position</td><td>vec3</td><td>Eye-space position passed on to the remaining renderer shading pipeline.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="evallighting">evalLighting()<a href="#evallighting" class="hash-link" aria-label="Direct link to evalLighting()" title="Direct link to evalLighting()">​</a></h4>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec4</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">evalLighting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> Fragment </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function can be called from within <em>surface()</em> or <em>litSurface()</em>. Callers pass in a filled-in <em>Fragment</em> structure and it returns the resulting lit colour in a vec4. Following is an example usage:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">litSurface</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SurfaceInput i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">inout</span><span class="token plain"> LitFragment o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Fragment frag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  frag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">albedo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  frag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">normal </span><span class="token operator">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">normal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  frag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position </span><span class="token operator">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec4</span><span class="token plain"> lightingResult </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">evalLighting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">frag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  o</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">colour </span><span class="token operator">=</span><span class="token plain"> lightingResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="fragment-structure">Fragment structure<a href="#fragment-structure" class="hash-link" aria-label="Direct link to Fragment structure" title="Direct link to Fragment structure">​</a></h5>
<p>This structure is used to pass into a call to <em>evalLighting()</em>. All members should be assigned a value to ensure no garbage is placed in unassigned members. Following is a table of all members available:</p>
<table><thead><tr><th><strong>Name</strong></th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>position</td><td>vec3</td><td>Eye-space position passed on to the remaining shader pipeline to undergo lighting.</td></tr><tr><td>normal</td><td>vec3</td><td>Eye-space normal passed on to the remaining shader pipeline to undergo lighting.</td></tr><tr><td>albedo</td><td>vec3</td><td>Surface albedo used for lighting calculations.</td></tr><tr><td>emissive</td><td>vec3</td><td>Emissive output from the surface.</td></tr><tr><td>smoothness</td><td>float</td><td>Adjusts how smooth the material&#x27;s surface appears, 0 being very rough and 1 being perfectly smooth.</td></tr><tr><td>reflectivity</td><td>float</td><td>A value from 0 to 1 representing the amount of light that is reflected.</td></tr><tr><td>metalness</td><td>float</td><td>A value from 0 to 1 representing how metallic the surface is.</td></tr><tr><td>ambient</td><td>float</td><td>How much to scale ambient lighting for this surface.</td></tr><tr><td>alpha</td><td>float</td><td>Adjusts the translucency of the surface.</td></tr><tr><td>IBL</td><td>float</td><td>Set to 0.0 or 1.0 to either disable/enable Image-Based Lighting for this surface fragment.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vertex">vertex()<a href="#vertex" class="hash-link" aria-label="Direct link to vertex()" title="Direct link to vertex()">​</a></h3>
<p>The vertex function allows the shader to manipulate vertices of models using this surface shader. It takes the following form:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">inout</span><span class="token plain"> SurfaceInput i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that SurfaceInput is declared as &quot;inout&quot;, so it acts as the sole input and sole output parameter for this function. Any values modified in this structure will propagate along to the surface( ) function as an input parameter.</p>
<p>Below is a quick example of modifying a model&#x27;s vertices using this function:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">inout</span><span class="token plain"> SurfaceInput i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position </span><span class="token operator">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position </span><span class="token operator">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">normal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That function will extrude all vertices by one unit along their normals.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uniforms">Uniforms<a href="#uniforms" class="hash-link" aria-label="Direct link to Uniforms" title="Direct link to Uniforms">​</a></h3>
<p>There are a number of shader uniforms accessible within the surface shaders which may prove useful.</p>
<table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>uni_time</td><td>float</td><td>Indicates how much time has elapsed whilst the application has been active. Can be useful for animating surface properties.</td></tr><tr><td>uni_viewport</td><td>vec4</td><td>Contains the current viewport parameters. (origin.x, origin.y, width, height)</td></tr><tr><td>uni_viewMat</td><td>mat4</td><td>View matrix. Can be used to transform a position/direction into eye-space.</td></tr><tr><td>uni_viewMatInv</td><td>mat4</td><td>Inverse view matrix. Can be used to transform from eye-space to world-space.</td></tr><tr><td>uni_proj</td><td>mat4</td><td>Projection matrix.</td></tr><tr><td>uni_projInv</td><td>mat4</td><td>Inverse projection matrix.</td></tr></tbody></table>
<p>Extending the previous example to use one of these uniforms:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">inout</span><span class="token plain"> SurfaceInput i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position </span><span class="token operator">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position </span><span class="token operator">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">normal </span><span class="token operator">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">uni_time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That function will animate the deformation of the meshes vertices along the vertex normals, resulting in a model which will expand and collapse over time.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="input-parameters">Input Parameters<a href="#input-parameters" class="hash-link" aria-label="Direct link to Input Parameters" title="Direct link to Input Parameters">​</a></h3>
<p>It is possible to also input custom properties to the surface shaders which can be modified from the user interface. For example, in our previous displacement example we may want to modify the magnitude from the user interface, this can be done as follows:</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&lt;</span><span class="token plain">params</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	</span><span class="token operator">&lt;</span><span class="token plain">MyMagnitude type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;float&quot;</span><span class="token plain"> value</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1.0&quot;</span><span class="token plain"> caption</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Magnitude&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">params</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">float</span><span class="token plain"> MyMagnitude</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">vertex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">inout</span><span class="token plain"> SurfaceInput i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position </span><span class="token operator">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">position </span><span class="token operator">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">normal </span><span class="token operator">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">uni_time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> MyMagnitude</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That code defines a user value &quot;MyMagnitude&quot; of type floating-point, with a default value of 1.0 and a caption of &quot;Magnitude&quot; which is how it will be shown in the UI. Notice how there must also be a uniform of the same type and name defined for the shader to access the value. To modify the magnitude the user can alter the &quot;Magnitude&quot; property which will now be visible when selecting the Surface Shader Instance.</p>
<p>These custom properties can also inherit their value from any material properties where the types match. This can be done by clicking on the button to the right of the input fields.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/surface-shader-param-inherit-024c276f56a3c40854997f274fbf1718.png" width="438" height="285" class="img_ev3q"></p>
<p>Following is some sample code showing usage of all the types available to the user parameters, along with an example of how they appear in the UI.</p>
<div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&lt;</span><span class="token plain">params</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyFloat type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;float&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyBool type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;bool&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyVec2 type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;vec2&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyVec3 type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;vec3&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyVec4 type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;vec4&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyColour type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;colour&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyTex2D type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;texture2d&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyTex3D type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;texture3d&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token plain">MyTexCube type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;texturecube&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">params</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">float</span><span class="token plain"> MyFloat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bool</span><span class="token plain"> MyBool</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec2</span><span class="token plain"> MyVec2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec3</span><span class="token plain"> MyVec3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec4</span><span class="token plain"> MyVec4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">vec3</span><span class="token plain"> MyColour</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> sampler2d MyTex2D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> sampler3d MyTex3D</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uniform</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">samplerCube</span><span class="token plain"> MyTexCube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/surface-shader-param-types-42a3cb5c6942c085169ee812320e1df5.png" width="525" height="394" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/virtalis/docs/tree/master/docs/visionary-render-programming/shaders/surface-shaders.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/visionary-render-programming/shaders/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/visionary-render-programming/shaders/view-shaders"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">View Shaders</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-the-assemblies" class="table-of-contents__link toc-highlight">Creating the assemblies</a></li><li><a href="#writing-the-shader" class="table-of-contents__link toc-highlight">Writing the Shader</a><ul><li><a href="#surface" class="table-of-contents__link toc-highlight">surface()</a></li><li><a href="#litsurface" class="table-of-contents__link toc-highlight">litSurface()</a></li><li><a href="#vertex" class="table-of-contents__link toc-highlight">vertex()</a></li><li><a href="#uniforms" class="table-of-contents__link toc-highlight">Uniforms</a></li><li><a href="#input-parameters" class="table-of-contents__link toc-highlight">Input Parameters</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://virtalis.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/assets/logos/virtalis.svg" alt="Virtalis Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="140"><img src="/assets/logos/virtalis-dark.svg" alt="Virtalis Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="140"></a></div><div class="footer__copyright">Copyright © 2025 Virtalis Ltd. All rights reserved.</div></div></div></footer></div>
</body>
</html>