<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-virtalis-hub-system-admin/setup/publish-plugin" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Install the VirtalisPublish Plugin | Virtalis Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.virtalis.com/virtalis-hub-system-admin/setup/publish-plugin"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Install the VirtalisPublish Plugin | Virtalis Docs"><meta data-rh="true" name="description" content="VirtalisPublish is a plugin for PTC’s Windchill PLM server software. It allows assemblies to be published to Virtalis Hub when Windchill detects that they have been modified. Once installed and and correctly configured, the general process is as follows."><meta data-rh="true" property="og:description" content="VirtalisPublish is a plugin for PTC’s Windchill PLM server software. It allows assemblies to be published to Virtalis Hub when Windchill detects that they have been modified. Once installed and and correctly configured, the general process is as follows."><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.virtalis.com/virtalis-hub-system-admin/setup/publish-plugin"><link data-rh="true" rel="alternate" href="https://docs.virtalis.com/virtalis-hub-system-admin/setup/publish-plugin" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.virtalis.com/virtalis-hub-system-admin/setup/publish-plugin" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://N450QRS24Y-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-98F5PV30KY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-98F5PV30KY",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-KBWDPQHK",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Virtalis Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.6350f981.css">
<script src="/assets/js/runtime~main.a67e4f5f.js" defer="defer"></script>
<script src="/assets/js/main.9a396758.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KBWDPQHK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="35" height="30" viewBox="0 0 35 30" aria-hidden="true"><path stroke="white" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/assets/logos/virtalis-docs.svg" alt="Virtalis Docs Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" width="180"><img src="/assets/logos/virtalis-docs.svg" alt="Virtalis Docs Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="180"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">User Manuals</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/importers-and-exporters">Importers and Exporters</a></li><li><a class="dropdown__link" href="/license-server">License Server</a></li><li><a class="dropdown__link" href="/virtalis-hub-and-web-viewer">Virtalis Hub and Web Viewer</a></li><li><a class="dropdown__link" href="/visionary-render">Visionary Render</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Technical Guides</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/virtalis-hub-system-admin">Virtalis Hub System Admin</a></li><li><a class="dropdown__link" href="/visionary-render-programming">Visionary Render Programming</a></li></ul></div><a class="navbar__item navbar__link" href="/release-notes">Release Notes</a><a class="navbar__item navbar__link" href="/changelogs">Changelogs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_MW0i colorModeToggle_DEke"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="Switch between light and dark mode (currently dark mode)" aria-label="Switch between light and dark mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_SFTY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_ekgs"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Virtalis Hub System Admin</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/virtalis-hub-system-admin">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/virtalis-hub-system-admin/setup/deploy-kubernetes">Setup</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/virtalis-hub-system-admin/setup/deploy-kubernetes">Deploy to a Kubernetes Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/virtalis-hub-system-admin/setup/update">Update to Latest Version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/virtalis-hub-system-admin/setup/deploy-monitoring">Deploy the Monitoring Service Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/virtalis-hub-system-admin/setup/publish-plugin">Install the VirtalisPublish Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/virtalis-hub-system-admin/setup/translator-plugin">Install the Translator Plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/virtalis-hub-system-admin/configure/authentication">Configure</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Virtalis Hub System Admin</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Setup</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Install the VirtalisPublish Plugin</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Install the VirtalisPublish Plugin</h1></header>
<p>VirtalisPublish is a plugin for PTC’s Windchill PLM server software. It allows assemblies to be published to Virtalis Hub when Windchill detects that they have been modified. Once installed and and correctly configured, the general process is as follows.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">‍Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to ‍Prerequisites" title="Direct link to ‍Prerequisites">​</a></h2>
<p>The processes outlined in this document have been developed and tested on Windchill 11.1.</p>
<p>Throughout this document the base installation folder of Windchill will be referred to as <code>&lt;install-folder&gt;</code>, an example would be <code>D:\ptc\Windchill_11.1\Windchill</code>.</p>
<p>Creo Elements/Pro (formerly Pro/Engineer) needs to be installed in the Windchill environment. This acts as the ‘Worker’ that Windchill’s Worker Agent will delegate the job of publishing a representation to, after a successful check-in event.</p>
<p>It is assumed that you have already installed Virtalis Hub. After installing the plugin or making any configuration changes, the PTC Windchill service must be restarted for the changes to take effect.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-installation">Pre-Installation<a href="#pre-installation" class="hash-link" aria-label="Direct link to Pre-Installation" title="Direct link to Pre-Installation">​</a></h2>
<p>You must configure Virtalis Hub to allow for Windchill to talk to the Message Queue. The communication between Windchill and the message queue will be encrypted using TLS.</p>
<p>Export the variables replacing anything in <code>&lt;&gt;</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">export HUB_NAMESPACE=&lt;Hub namespace&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-the-previous-configuration">‍Load the Previous Configuration<a href="#load-the-previous-configuration" class="hash-link" aria-label="Direct link to ‍Load the Previous Configuration" title="Direct link to ‍Load the Previous Configuration">​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">. ./load-install-config.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker login virtaliscustomer.azurecr.io \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-u ${ACR_USERNAME} \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-p ${ACR_PASSWORD}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The next command will generate a password for the client certificates and requires the pwgen package to be available on the command line. This can be substituted for any other command which generates a strong password.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">export MQ_CLIENT_KEY_PASS=&quot;$(pwgen 30 1 -s)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Generate certs:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run --rm \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-e HUB_DOMAIN=${HUB_DOMAIN} \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-e MQ_CLIENT_KEY_PASS=${MQ_CLIENT_KEY_PASS} \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-e TRUSTSTORE_PASSWORD=${TRUSTSTORE_PASSWORD} \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-v /tmp/result:/tmp/result \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virtaliscustomer.azurecr.io/windchill-cert-generator:0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Create a rabbitmq-certs secret from the generated certs:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl create secret generic rabbitmq-certs -n $HUB_NAMESPACE \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--from-file=&#x27;ca.crt&#x27;=ca_certificate.pem \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--from-file=&#x27;tls.crt&#x27;=server_certificate.pem \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--from-file=&#x27;tls.key&#x27;=server_key.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-rabbitmq">‍Configure RabbitMQ<a href="#configure-rabbitmq" class="hash-link" aria-label="Direct link to ‍Configure RabbitMQ" title="Direct link to ‍Configure RabbitMQ">​</a></h2>
<p>Upgrade RabbitMQ (make sure you are inside the ~/k8s/ directory (default) or wherever else the installation files were downloaded to during the Virtalis Hub installation):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">MQ_EXPOSE_INGRESS=1 ./install-mq.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Configure a file source for Windchill by referring to the Configuring External File Sources section of the Deploying Virtalis Hub document and run the script:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./create-secrets.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check if port 5671 is exposed in the service definition:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl get svc message-queue-rabbitmq -n $HUB_NAMESPACE -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Under the port array you should find amqp-ssl:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">......</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.......</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: amqp-ssl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 5671</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protocol: TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    targetPort: amqp-ssl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">......</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If it is missing, add it to the service and also to the statefulset:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: amqp-ssl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 5671</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protocol: TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    targetPort: amqp-ssl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl edit statefulset message-queue-rabbitmq -n $HUB_NAMESPACE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add the following entry under:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">template</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">containers[0]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - containerPort: 5671</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          name: amqp-ssl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          protocol: TCP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-nginx">‍Configure nginx<a href="#configure-nginx" class="hash-link" aria-label="Direct link to ‍Configure nginx" title="Direct link to ‍Configure nginx">​</a></h2>
<p>Run the command shown below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cat &lt;&lt;EOF | kubectl apply -f -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name: tcp-services</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  namespace: ingress-nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  5673: &quot;$HUB_NAMESPACE/message-queue-rabbitmq:5671&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This tells nginx to listen on port 5673 and proxy the connection to rabbitmq on port 5672.</p>
<p>Run:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl edit deploy ingress-nginx-ingress-controller -n ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Under containers.args add these args:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --tcp-services-configmap=ingress-nginx/tcp-services</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- --enable-ssl-passthrough</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Edit the ingress-nginx-controller service and add the new port under spec.ports:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl edit svc ingress-nginx-ingress-controller -n ingress-nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - name: mq</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    port: 5673</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protocol: TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    targetPort: 5673</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-windchill-user">‍Create a Windchill User<a href="#create-a-windchill-user" class="hash-link" aria-label="Direct link to ‍Create a Windchill User" title="Direct link to ‍Create a Windchill User">​</a></h2>
<p>Replace <code>&lt;WINDCHILL USER PASSWORD&gt;</code> with a strong random generated password and replace <code>&lt;HUB NAMESPACE&gt;</code> with the namespace Virtalis Hub is deployed in and then run the command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl exec -n $HUB_NAMESPACE message-queue-rabbitmq-0 -- /bin/bash -c \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;rabbitmqctl add_user &#x27;windchill&#x27; &#x27;&lt;WINDCHILL USER PASSWORD&gt;&#x27; &amp;&amp; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rabbitmqctl set_permissions -p &#x27;/&#x27; &#x27;windchill&#x27; &#x27;^$&#x27; &#x27;^(amq.default|delay.exchange)$&#x27; &#x27;^$&#x27;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-windchill-group">‍Create a Windchill Group<a href="#create-a-windchill-group" class="hash-link" aria-label="Direct link to ‍Create a Windchill Group" title="Direct link to ‍Create a Windchill Group">​</a></h2>
<p>In the keycloak admin panel, create a new group with the name “windchill” and add any users to it that will use the Windchill integration (see <a href="/virtalis-hub-system-admin/configure/user-management">User Management</a> for further information).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<p>The plugin comes as a Zip file containing two main files:</p>
<ul>
<li>VirtalisPublish.jar – this contains the compiled plugin code required to publish assemblies to Virtalis Hub.</li>
<li>virtalisPublish.properties – a configuration file for tailoring the plugin to your environment.</li>
</ul>
<p>To install, copy the files to the following locations:</p>
<ul>
<li>VirtalisPublish.jar: <code>&lt;install-folder&gt;/codebase/WEB-INF/lib</code></li>
<li>virtalisPublish.properties: <code>&lt;install-folder&gt;/codebase</code></li>
</ul>
<p>The Zip file also comes with some third-party JAR files (one RabbitMQ AMQP jar required for posting messages to Virtalis Hub’s queue, and three Jackson jar files for JSON serialisation) that will be required if this is a first-time installation. They should also be copied to the <code>&lt;install-folder&gt;/codebase/WEB-INF/lib</code> folder if they aren’t already there.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-windchill">Configuring Windchill<a href="#configuring-windchill" class="hash-link" aria-label="Direct link to Configuring Windchill" title="Direct link to Configuring Windchill">​</a></h2>
<p>To register the plugin with Windchill and instruct it to execute the plugin at the correct time, make the following modifications to these existing Windchill files.</p>
<p>wt.properties
Location: <code>&lt;install-folder&gt;/codebase/wt.properties</code></p>
<p>The main class in the VirtalisPublisher plugin is called StandardCopyRepsService. It extends the Windchill class wt.service.StandardManager, allowing integration with Windchill’s infrastructure. This class must be registered as a new service within Windchill.</p>
<p>In the example below, it is registered as service number 8000. See here for some important notes on the numbering used. It is important to pick a number that’s higher than all the built-in Windchill services that it might need to work.</p>
<p>Add an entry similar to this one:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wt.services.service.8000=co.uk.rootsolutions.virtalis.CopyRepsService/co.uk.rootsolutions.virtalis.StandardCopyRepsService</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>‍&lt;site-specific&gt;.xconf</code>
Location: <code>&lt;install-folder&gt;</code></p>
<p>All installations have a site.xconf file in <code>&lt;install-folder&gt;</code>. This is one of the main Windchill configuration files.</p>
<p>However, changes aren’t allowed to be made to this file because future upgrades could overwrite them. Therefore, installations will have customer-specific configuration files alongside site.xconf, such as virtalis.xconf in our instance. To locate your file, open site.xconf and look for a ConfigurationRef entry similar to the one below. This will tell you which file to make the next changes to:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;ConfigurationRef xlink:href=&quot;D:\ptc\Windchill_11.1\Windchill\virtalis.xconf&quot;/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If such a file doesn’t exist, you may need to create one. Use the attached virtalis.xconf file as an example, and refer to the documentation here.</p>
<p>Locate the entry with a property name set to publish.afterloadermethod, and edit it to look like this. If such an entry doesn’t exist, add one.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;Property name=&quot;publish.afterloadermethod&quot; overridable=&quot;true&quot; targetFile=&quot;codebase/WEB-INF/conf/wvs.properties&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  value=&quot;co.uk.rootsolutions.virtalis.StandardCopyRepsService/copyReps&quot;/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, add an entry for the new service making sure the number (8000 in this case) matches what was specified in wt.properties:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;Property name=&quot;wt.services.service.8000&quot; overridable=&quot;true&quot; targetFile=&quot;codebase/wt.properties&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  value=&quot;co.uk.rootsolutions.virtalis.CopyRepsService/co.uk.rootsolutions.virtalis.StandardCopyRepsService&quot;/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>‍wvs.properties</p>
<p>Location: <code>install-folder&gt;&lt;/codebase/WEB-INF/conf</code></p>
<p>This file also requires a reference to the Virtalis service. Add the following entry:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">publish.afterloadermethod=co.uk.rootsolutions.virtalis.StandardCopyRepsService/copyReps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-plugin">‍Configuring the Plugin<a href="#configuring-the-plugin" class="hash-link" aria-label="Direct link to ‍Configuring the Plugin" title="Direct link to ‍Configuring the Plugin">​</a></h2>
<p>The file virtalisPublish.properties allows various configuration options to be set, which are described below:</p>
<p>‍Property name: copy.logger.location</p>
<p>Description: Sets location for logger, if left without a value logs will be saved to <code>&lt;install-folder&gt;\logs</code> e.g. <code>D:\\ptc\\VirtalisPublish.log</code>.</p>
<p>Example value: <code>D:/ptc/Virtalis_Download/logs/publisher.txt</code></p>
<p>‍
‍Property name: log.verbose</p>
<p>Description: Set log.verbose=true fordebugging purposes.</p>
<p>Example value: <code>true</code></p>
<p>‍
‍Property name: download.metadata</p>
<p>Description: If true this will create a file for EPMDocument metadata.</p>
<p>Example value: <code>true</code>
‍</p>
<p>Property name: attribute.names</p>
<p>Description: If download.metadata=true set the list of attributes required here - use internal name &amp; comma delimited.</p>
<p>Example value: <code>name, number,revision,iterationInfo.identifier.iterationId,state.state</code>
‍</p>
<p>‍Property name: metadata.file.extension</p>
<p>Description: Setfiletype for metadata file, for example txt or csv</p>
<p>Example value: <code>txt</code>
‍</p>
<p>‍Property name: download.use.http</p>
<p>Description: If true, the download URL that gets built up and then sent in the message to Virtalis Hub will begin with http. Otherwise (and also default) it will begin with https.</p>
<p>Example value: <code>true/false</code>
‍</p>
<p>‍Property name: downloadToLocal.dir</p>
<p>Description: set location for files and metadata to be downloaded to, include \ escape character, can be unc path e.g.<code>\\\\vmware-host\\Shared Folders\\share</code></p>
<p>Example value: <code>D:\\ptc\\Virtalis_Download</code>
‍</p>
<p>‍Property name: check.for.state</p>
<p>Description: If true this will only download files/metadata if published EPMDocument is at a state specified in copy.publish.states property.</p>
<p>‍Example value: <code>true</code>
‍</p>
<p>‍Property name: copy.publish.states</p>
<p>Description: States considered if check.for.state is true.</p>
<p>Example value: <code>InWork,Released,Controlled</code></p>
<p>‍Property name: force.republish</p>
<p>Description: If a positioning assembly representation already exists, when this property is set to true will overwrite the existing representation.</p>
<p>Example value: <code>true</code></p>
<p>‍Property name: queue.host</p>
<p>Description: The IP address or hostname of the Virtalis Hub queue to which NotificationMessages will be published after an assembly is checked-in.</p>
<p>If using peer-verification (see below) this value must match either the CN or SAN fields in the server’s SSL certificate.</p>
<p>Example value: <code>123.456.789.098</code> or a hostname</p>
<p>‍Property name: queue.port</p>
<p>Description: The port number needed to connect to the Virtalis Hub queue.</p>
<p>Example value: <code>1234</code></p>
<p>‍Property name: queue,name</p>
<p>Description: The name of the Virtalis Hub queue to publish messages on. The value should never need changing from ‘changes’.</p>
<p>Example value: <code>changes</code></p>
<p>‍Property name: queue.username</p>
<p>Description: The username required to connect to the Virtalis Hub queue (this is windchill by default if you follow the Pre-installation steps).</p>
<p>Example value: <code>&lt;queue-username&gt;</code></p>
<p>‍Property name: queue.password</p>
<p>Description: The password required to connect to the Virtalis Hub queue.</p>
<p>Example value: <code>&lt;queue-password&gt;</code></p>
<p>‍Property name: queue.ssl</p>
<p>Description: Whether to use SSL to connect to the Virtalis Hub queue. Setting this alone to true will encrypt the traffic between the Plugin and Virtalis Hub but will not perform peer-verification checks (see below). Nevertheless, this adds a layer of security.</p>
<p>Example value: <code>true/false</code></p>
<p>‍Property name: queue.usePeerVerification</p>
<p>Description: If set to true (and queue.ssl is also true), will attempt to perform peer verification when connecting to the Virtalis Hub queue. This adds more security but requires client keys to be installed. See the section on SSL/TLS.</p>
<p>Example value: <code>true/false</code></p>
<p>‍Property name: queue.client.key</p>
<p>Description: The client key. This file should be provided by a site administrator who provided the certificate used to secure the Virtalis Hub queue.</p>
<p><code>D:/ptc/Virtalis_Download/truststore/client_key.p12</code></p>
<p>‍Property name: queue.trust.store</p>
<p>Description: This is where the Windchill plugin will store it’s certificates &amp; keys etc. Should be a Java keystore file.</p>
<p>Example value: <code>D:/ptc/Virtalis_Download/truststore/rabbitstore.jks</code></p>
<p>‍Property name: client.key.password</p>
<p>Description: The password for the client key specified in queue.client.key.</p>
<p>Example value: <code>&lt;client-key-password&gt;</code></p>
<p>‍Property name: trust.store.password</p>
<p>Description: The password for the trust store specified when generating certificates under the pre-installation section under “Create a keystore for windchill”.</p>
<p>Example value: <code>&lt;trust-store-password&gt;</code></p>
<p>‍Property name: exportable.item.filters</p>
<p>Description: Regular expressions to limit which assemblies will be sent to Virtalis Hub. See the Filtering section for more information.</p>
<p>Example value:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">.*\.asm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.*\.asm;.*\.prt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.*Aviation.*\.asm;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>‍Property name: groups</p>
<p>Description: A comma-separated list of Virtalis Hub groups that the resulting asset will be available to (in Virtalis Hub).</p>
<p>Example value:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">windchill</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">windchill,engineers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-the-installation">‍Verifying the Installation<a href="#verifying-the-installation" class="hash-link" aria-label="Direct link to ‍Verifying the Installation" title="Direct link to ‍Verifying the Installation">​</a></h2>
<p>Once installed and configured, restart the PTC Windchill service.</p>
<p>Locate the folder <code>D:\ptc\Windchill_11.1\Windchill\logs</code> and monitor the most recent <code>MethodServer-&lt;date&gt;-log4j.log</code> file. You should see messages appear like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">2021-03-18 23:01:01,242 INFO [main] wt.system.out - VirtalisPublish - Loading properties</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2021-03-18 23:01:01,245 INFO [main] wt.system.out - VirtalisPublish - Setting up logger</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2021-03-18 23:01:01,245 INFO [main] wt.system.out - VirtalisPublish - logger setup complete</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This indicates that the plugin has been successfully registered as a service within Windchill.</p>
<p>Note, these are low-level log messages logged to stdout. After these messages appear, all future log messages from the plugin will be logged to the location specified by the configuration property copy.logger.location, which by default is D:\ptc\Virtalis_Download\logs\publisher.txt.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-plugin">Testing the Plugin<a href="#testing-the-plugin" class="hash-link" aria-label="Direct link to Testing the Plugin" title="Direct link to Testing the Plugin">​</a></h2>
<p>Make a change to an assembly in Windchill and perform a check-in.</p>
<p>Shortly after, you should see some activity in the log file specified as copy.logger.location (publisher.txt by default).</p>
<p>There should be a message similar to the following:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2021-03-19 14:39:19.834]  - co.uk.rootsolutions.virtalis.StandardCopyRepsService - co.uk.rootsolutions.virtalis.MessageSender Message sent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This indicates that Windchill has posted a message to the Virtalis Hub queue and you should see an import job running in the jobs screen in Virtalis Hub</p>
<p>If not, please refer to publisher.txt to see if there are any obvious error messages, the main Windchill logs, and the troubleshooting guide below.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<p>###Test the Connection</p>
<p>We strongly recommend that before proceeding you test the Windchlll queue connection using the following commands. If there are connectivity issues in the future, the following can also assist with troubleshooting.</p>
<p>Test the connection with the rabbitmq python client.</p>
<p>Replace the variables wrapped in the # comment block and save file as mq.py:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import pika</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import logging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import ssl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">logging.basicConfig(level=logging.INFO)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">###</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### Replace everything in &lt;&gt; below</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cafile_path=&quot;&lt;full path to dir&gt;/ca_certificate.pem&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">client_cert_path=&quot;&lt;full path to dir&gt;/client_certificate.pem&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">client_key_path=&quot;&lt;full path to dir&gt;/client_key.pem&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mq_domain=&quot;&lt;rabbit message queue domain/address&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">windchill_mq_password=&quot;&lt;windchill user password&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">###</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">###</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">context = ssl.create_default_context(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cafile=cafile_path)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">context.load_cert_chain(client_cert_path,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        client_key_path)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssl_options = pika.SSLOptions(context, mq_domain)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">credentials = pika.PlainCredentials(&quot;windchill&quot;, windchill_mq_password)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">connection = pika.BlockingConnection(pika.ConnectionParameters(host=mq_domain, port=5673,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virtual_host=&#x27;/&#x27;, </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">credentials=credentials,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssl_options=ssl_options</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">channel = connection.channel()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Install dependencies:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip3 install pika</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chmod +x mq.py</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./mq.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The connection should be instantly accepted and then closed:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">root@master:~# ./mq.py </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.utils.connection_workflow:Pika version 1.1.0 connecting to (&#x27;10.209.65.143&#x27;, 5673)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.utils.io_services_utils:Socket connected: &lt;socket.socket fd=6, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=(&#x27;10.209.65.143&#x27;, 45154), raddr=(&#x27;10.209.65.143&#x27;, 5673)&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.utils.io_services_utils:SSL handshake completed successfully: &lt;ssl.SSLSocket fd=6, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=(&#x27;10.209.65.143&#x27;, 45154), raddr=(&#x27;10.209.65.143&#x27;, 5673)&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.utils.connection_workflow:Streaming transport linked up: (&lt;pika.adapters.utils.io_services_utils._AsyncSSLTransport object at 0x7fd7c7550910&gt;, _StreamingProtocolShim: &lt;SelectConnection PROTOCOL transport=&lt;pika.adapters.utils.io_services_utils._AsyncSSLTransport object at 0x7fd7c7550910&gt; params=&lt;ConnectionParameters host=hub.local port=5673 virtual_host=/ ssl=True&gt;&gt;).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.utils.connection_workflow:AMQPConnector - reporting success: &lt;SelectConnection OPEN transport=&lt;pika.adapters.utils.io_services_utils._AsyncSSLTransport object at 0x7fd7c7550910&gt; params=&lt;ConnectionParameters host=hub.local port=5673 virtual_host=/ ssl=True&gt;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.utils.connection_workflow:AMQPConnectionWorkflow - reporting success: &lt;SelectConnection OPEN transport=&lt;pika.adapters.utils.io_services_utils._AsyncSSLTransport object at 0x7fd7c7550910&gt; params=&lt;ConnectionParameters host=hub.local port=5673 virtual_host=/ ssl=True&gt;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.blocking_connection:Connection workflow succeeded: &lt;SelectConnection OPEN transport=&lt;pika.adapters.utils.io_services_utils._AsyncSSLTransport object at 0x7fd7c7550910&gt; params=&lt;ConnectionParameters host=hub.local port=5673 virtual_host=/ ssl=True&gt;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO:pika.adapters.blocking_connection:Created channel=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="windchill-doesnt-start-after-installing-the-plugin">‍Windchill Doesn’t Start After Installing the Plugin<a href="#windchill-doesnt-start-after-installing-the-plugin" class="hash-link" aria-label="Direct link to ‍Windchill Doesn’t Start After Installing the Plugin" title="Direct link to ‍Windchill Doesn’t Start After Installing the Plugin">​</a></h3>
<p>Check the main Windchill logs, which can be found in <code>&lt;install-folder&gt;/logs</code>. There are lots of different log files, you should first check <code>MethodServer-xxxxxxxxxxxx.log</code> and <code>BackgroundMethodServer-xxxxxxxxxxxx.log</code>.</p>
<p>Nothing Happens After Performing a Check-in on an Assembly
Check the main logs in <code>&lt;install-folder&gt;/logs</code> for errors.</p>
<p>Check the log file of the VirtalisPublish plugin for errors. This is the file specified by the <code>copy.logger.location</code> configuration property in <code>virtalisPublish.properties</code>.</p>
<p>Check the Worker Agent to see if the job was processed. You can access the worker agent jobs by logging into Windchill as an admin user and choosing Browse &gt; Site &gt; Utilities.</p>
<p>You can see the general health of the Worker Agent in the window that opens up:</p>
<p>There should be a PROE worker registered. This performs the work after a check-in and is required for the VirtalisPublish plugin to be triggered. Ask your Windchill server administrator to assist if the worker is not there. If it is listed but says anything other than ‘Available’ in the Job column, or the check against ‘On-Line’ is missing, you can try restarting it using the green flag icon in the appropriate row.</p>
<p>Check the WVS Job Monitor to see if the job failed. You can access this via Quick Links &gt; WVS Job Monitor.</p>
<p>You might see a message saying that the publishing job failed. Note, this is Windchill’s internal publishing job (performed by the Worker).</p>
<p>If you see an error similar to the one shown below, you will need to contact the Windchill server administrator to find out why the PROE Worker Agent isn’t working. It could be that the PROE licence has expired or any number of other reasons.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-agent-fails-to-start">Worker Agent Fails to Start<a href="#worker-agent-fails-to-start" class="hash-link" aria-label="Direct link to Worker Agent Fails to Start" title="Direct link to Worker Agent Fails to Start">​</a></h3>
<p>The worker agent can also fail to start if the license for Creo Parametric has expired. You may see these errors in the worker agent logs as it tries to start:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:30] timestamps added to logging from command argument.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:30] workerhelper - Version : Creo 6.0.0.0 - (16.0.0.24) x86e_win64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:30] Increasing initial timeout to 180 seconds from command line to accomodate helper startup sleep time.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:30] Connecting to server &quot;rootwindchill.virtalis.local&quot; on port 5600</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:30] Connection established</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:30] Helper keep alive set - 300000 milliseconds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:31] Worker Cache Cleared</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:31] Started worker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:36] Worker process 9004 has exited unexpectedly. Shutting down helper.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:36] Worker helper shutting down.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[2022-02-16 10:28:36] WorkerHelper completed, exiting</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These are indicative of a Creo Parametric license error which you can then confirm by running Creo Parametric. If Creo Parametric generates a license error at startup then contact the Windchill server administrator.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/virtalis/docs/tree/master/docs/virtalis-hub-system-admin/setup/publish-plugin.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-02-21T03:09:58.000Z" itemprop="dateModified">Feb 21, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/virtalis-hub-system-admin/setup/deploy-monitoring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Deploy the Monitoring Service Stack</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/virtalis-hub-system-admin/setup/translator-plugin"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Install the Translator Plugins</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">‍Prerequisites</a></li><li><a href="#pre-installation" class="table-of-contents__link toc-highlight">Pre-Installation</a></li><li><a href="#load-the-previous-configuration" class="table-of-contents__link toc-highlight">‍Load the Previous Configuration</a></li><li><a href="#configure-rabbitmq" class="table-of-contents__link toc-highlight">‍Configure RabbitMQ</a></li><li><a href="#configure-nginx" class="table-of-contents__link toc-highlight">‍Configure nginx</a></li><li><a href="#create-a-windchill-user" class="table-of-contents__link toc-highlight">‍Create a Windchill User</a></li><li><a href="#create-a-windchill-group" class="table-of-contents__link toc-highlight">‍Create a Windchill Group</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#configuring-windchill" class="table-of-contents__link toc-highlight">Configuring Windchill</a></li><li><a href="#configuring-the-plugin" class="table-of-contents__link toc-highlight">‍Configuring the Plugin</a></li><li><a href="#verifying-the-installation" class="table-of-contents__link toc-highlight">‍Verifying the Installation</a></li><li><a href="#testing-the-plugin" class="table-of-contents__link toc-highlight">Testing the Plugin</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#windchill-doesnt-start-after-installing-the-plugin" class="table-of-contents__link toc-highlight">‍Windchill Doesn’t Start After Installing the Plugin</a></li><li><a href="#worker-agent-fails-to-start" class="table-of-contents__link toc-highlight">Worker Agent Fails to Start</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__items"><div class="footer__item">© 2025 Virtalis Group. All rights reserved.</div></div></div><div class="col footer__col"><div class="footer__items"><div class="footer__item"><a href="https://www.virtalis.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></div><div class="footer__item"><a href="https://www.virtalis.com/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact</a></div><div class="footer__item"><a href="https://www.virtalis.com/support" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support</a></div><div class="footer__item"><a class="footer__link-item" href="/glossary">Glossary</a></div><div class="footer__item"><a class="footer__link-item" href="/privacy-policy">Privacy Policy</a></div></div></div><div class="col footer__col"><div class="footer__items"><div class="footer__item"><a href="https://virtalis.com" target="_blank" rel="noreferrer noopener" aria-label="Virtalis Homepage"><img src="assets/logos/virtalis.svg" alt="Virtalis Logo" class="footer__icon"></a></div><div class="footer__item"><a href="https://github.com/virtalis" target="_blank" rel="noreferrer noopener" aria-label="Virtalis GitHub"><img src="assets/logos/github.svg" alt="GitHub Logo" class="footer__icon"></a></div><div class="footer__item"><a href="https://www.linkedin.com/company/virtalis/" target="_blank" rel="noreferrer noopener" aria-label="Virtalis LinkedIn"><img src="assets/logos/linkedin.svg" alt="LinkedIn Logo" class="footer__icon"></a></div><div class="footer__item"><a href="https://www.youtube.com/@VirtalisReality" target="_blank" rel="noreferrer noopener" aria-label="Virtalis YouTube"><img src="assets/logos/youtube.svg" alt="YouTube Logo" class="footer__icon"></a></div></div></div></div></div></footer></div>
</body>
</html>