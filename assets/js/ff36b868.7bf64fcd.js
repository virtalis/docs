"use strict";(self.webpackChunkvirtalis_docs=self.webpackChunkvirtalis_docs||[]).push([[17264],{25495:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"virtalis-hub-system-admin/setup/deploy-kubernetes","title":"Deploy to a Kubernetes Cluster","description":"This section covers deploying a complete Virtalis Hub system into a Kubernetes cluster.","source":"@site/docs/virtalis-hub-system-admin/setup/deploy-kubernetes.mdx","sourceDirName":"virtalis-hub-system-admin/setup","slug":"/virtalis-hub-system-admin/setup/deploy-kubernetes","permalink":"/virtalis-hub-system-admin/setup/deploy-kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/virtalis/docs/tree/master/docs/virtalis-hub-system-admin/setup/deploy-kubernetes.mdx","tags":[],"version":"current","lastUpdatedAt":1740107398000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"virtalisHubSystemAdminSidebar","previous":{"title":"Introduction","permalink":"/virtalis-hub-system-admin"},"next":{"title":"Update to Latest Version","permalink":"/virtalis-hub-system-admin/setup/update"}}');var t=s(74848),i=s(28453);const l={sidebar_position:2},a="Deploy to a Kubernetes Cluster",o={},c=[{value:"System Requirements",id:"system-requirements",level:2},{value:"Admin Tools",id:"admin-tools",level:3},{value:"Set up",id:"set-up",level:2},{value:"Deployment Shell",id:"deployment-shell",level:3},{value:"Example",id:"example",level:4},{value:"Nginx Ingress Controller",id:"nginx-ingress-controller",level:3},{value:"Storage",id:"storage",level:2},{value:"Default",id:"default",level:3},{value:"Custom",id:"custom",level:3},{value:"Express",id:"express",level:4},{value:"Custom parameters",id:"custom-parameters",level:4},{value:"MinIO",id:"minio",level:5},{value:"Neo4j",id:"neo4j",level:5},{value:"MySQL",id:"mysql",level:5},{value:"Miscellaneous",id:"miscellaneous",level:5},{value:"Deployment",id:"deployment",level:2},{value:"Configure TLS",id:"configure-tls",level:3},{value:"Manually Creating a TLS Cert Secret",id:"manually-creating-a-tls-cert-secret",level:4},{value:"LetsEncrypt with Cert-manager",id:"letsencrypt-with-cert-manager",level:4},{value:"Download Installation Files",id:"download-installation-files",level:3},{value:"Create and Deploy Secrets",id:"create-and-deploy-secrets",level:3},{value:"Deploy Virtalis Hub and Database Services",id:"deploy-virtalis-hub-and-database-services",level:3},{value:"Retrieving the Keycloak Admin Password",id:"retrieving-the-keycloak-admin-password",level:4},{value:"Clean-up",id:"clean-up",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deploy-to-a-kubernetes-cluster",children:"Deploy to a Kubernetes Cluster"})}),"\n",(0,t.jsx)(n.p,{children:"This section covers deploying a complete Virtalis Hub system into a Kubernetes cluster."}),"\n",(0,t.jsx)(n.h2,{id:"system-requirements",children:"System Requirements"}),"\n",(0,t.jsx)(n.p,{children:"Kubernetes cluster (either on premises or in the cloud):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"At least version 1.22.7"}),"\n",(0,t.jsx)(n.li,{children:"8 cores"}),"\n",(0,t.jsx)(n.li,{children:"At least 64 GB of memory available to a single node (128 GB total recommended)"}),"\n",(0,t.jsx)(n.li,{children:"625 GB of storage (see the storage section for more information)"}),"\n",(0,t.jsx)(n.li,{children:"Nginx as the cluster ingress controller"}),"\n",(0,t.jsx)(n.li,{children:"Access to the internet during the software deployment and update"}),"\n",(0,t.jsx)(n.li,{children:"A network policy compatible network plugin"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Virtalis Hub does not require:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A GPU in the server"}),"\n",(0,t.jsx)(n.li,{children:"A connection to the internet following the software deployment"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"admin-tools",children:"Admin Tools"}),"\n",(0,t.jsx)(n.p,{children:"The follow administration tools are required along with their recommended tested version:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/",children:"kubectl"})," v1.22.7 - this package allows us to communicate with a Kubernetes cluster on the command line"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"\u200dhelm"})," v3.6.3 - this package is used to help us install large Kubernetes charts consisting of numerous resources"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/oras-project/oras/releases",children:"oras"})," v0.8.1 - this package is used to download an archive from our internal registry containing some configuration files which will be used to deploy Virtalis Hub"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/Azure/azure-cli",children:"azure cli"})," stable - this package is used to authenticate with our internal registry hosted on Azure"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://jqlang.github.io/jq/",children:"jq"})," v1.6 - this package is used to parse and traverse JSON on the command line"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/mikefarah/yq/releases",children:"yq"})," v4.6.1 - this package is used to parse and traverse YAML on the command line"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"These tools are not installed on the Virtalis Hub server but only on the machine that will communicate with a Kubernetes cluster for the duration of the installation."}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"If using recent versions of Ubuntu, the Azure CLI as installed by Snap is called azure-cli not az which refers to an older version in the Ubuntu repos. Alias azure-cli to az if needed."})}),"\n",(0,t.jsx)(n.h2,{id:"set-up",children:"Set up"}),"\n",(0,t.jsx)(n.h3,{id:"deployment-shell",children:"Deployment Shell"}),"\n",(0,t.jsx)(n.p,{children:"Make a directory to store temporary installation files:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo mkdir -p /home/root/Hub && \\\r\ncd /home/root/Hub && \\\r\nsudo chown $(whoami) /home/root/Hub \n"})}),"\n",(0,t.jsx)(n.p,{children:"Export the following variables:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export HUB_VERSION=2024.1.0\r\nexport ACR_REGISTRY_NAME=virtaliscustomer\r\nexport SKIP_MIGRATIONS=1\r\nexport TLS_SECRET_NAME=hub-tls-cert\r\nexport HUB_NAMESPACE=hub\n"})}),"\n",(0,t.jsx)(n.p,{children:"Substitute the variable values and export them:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export HUB_DOMAIN=<the domain Virtalis Hub will be hosted on>\r\nexport ACR_USERNAME=<service principal id>\r\nexport ACR_PASSWORD=<service principal password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Substitute and export the following variables, wrap the values in single quotes to prevent bash substitution:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export hub_licence__key=<hub licence xml snippet>\r\nexport hub_licence__signature=<hub licence signature>\n"})}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export hub_licence__key='<HUB><expires>123</expires></HUB>'\r\nexport hub_licence__signature='o8k0niq63bPYOMS53NjgOTUqA0xfaBjfP5uB1uma'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Export the environment variables if Virtalis Hub TLS will be configured to use LetsEncrypt:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'export KEYCLOAK_ANNOTATIONS="--set ingress.annotations\\\r\n.cert-manager\\.io/cluster-issuer=letsencrypt-prod"\r\n \r\nexport INGRESS_ANNOTATIONS="--set ingress.annotations\\\r\n.cert-manager\\.io/cluster-issuer=letsencrypt-prod"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Optional configuration variables:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export MANAGED_TAG=<custom image tag for Virtalis Hub services>\r\n \r\nexport MQ_EXPOSE_INGRESS=<when set to 1, expose rabbitmq on the ingress>\r\n\r\nexport LOW_SPEC<set to true to set memory requests to a \\\r\nlow amount for low spec machines, used for development>\r\n\r\nexport USE_NEO4J_MEMREC=<set to true to use neo4j memrec, \\\r\nuse in conjuction with LOW_SPEC>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"nginx-ingress-controller",children:"Nginx Ingress Controller"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl get pods -n ingress-nginx\n"})}),"\n",(0,t.jsx)(n.p,{children:"This should return at least 1 running pod."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"ingress-nginx nginx-ingress-controller\u2026\u2026.. 1/1 Running\n"})}),"\n",(0,t.jsx)(n.p,{children:"If Nginx is not installed, then please contact Virtalis to see if we can support a different ingress controller. Virtalis Hub is currently only compatible with Nginx."}),"\n",(0,t.jsx)(n.p,{children:"If there is no Ingress controller currently installed on the cluster, and you are confident you should install Nginx, then you can execute these commands to install it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"helm repo add bitnami https://charts.bitnami.com/bitnami\r\n\r\nhelm repo update\r\n\r\nhelm install ingress \r\n--create-namespace \\\r\n-n ingress-nginx \\\r\nbitnami/nginx-ingress-controller --version 9.7.7\n"})}),"\n",(0,t.jsx)(n.h2,{id:"storage",children:"Storage"}),"\n",(0,t.jsx)(n.p,{children:"Kubernetes supports a wide variety of volume plugins which allow you to provision storage dynamically as well as with constraints depending on your requirements."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/storage/storage-classes/#provisioner",children:"List of supported volume plugins"})}),"\n",(0,t.jsx)(n.p,{children:"All PersistentVolumes used by Virtalis Hub reserve 625 GB of storage space in total. This is a provisional amount which will likely change depending on your workload."}),"\n",(0,t.jsx)(n.h3,{id:"default",children:"Default"}),"\n",(0,t.jsx)(n.p,{children:"By default, Virtalis Hub is deployed with the local volume plugin which creates volumes on the worker nodes. This is not the recommended way to deploy Virtalis Hub and is only appropriate for test level deployments as all databases are tied to the single disk of the node that they\u2019re deployed on which hinders the performance of the system."}),"\n",(0,t.jsx)(n.p,{children:"To assist in dynamic local volume provisioning, we use the Local Path Provisioner service developed by Rancher:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl apply -f \\\r\nhttps://raw.githubusercontent.com/rancher/\\\r\nlocal-path-provisioner/master/deploy/local-path-storage.yaml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"custom",children:"Custom"}),"\n",(0,t.jsx)(n.p,{children:"You can customize how storage for Virtalis Hub is provisioned by specifying which storage class you want to use. This must be created by a Kubernetes Administrator beforehand or, in some environments, a default class is also suitable. For example, when deploying to an Azure Kubernetes Service instance, it comes with a default storage class on the cluster which can be used to request storage from Azure."}),"\n",(0,t.jsx)(n.h4,{id:"express",children:"Express"}),"\n",(0,t.jsx)(n.p,{children:"If you only want to modify the storage class and leave all other parameters like size as default, export these variables out:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'export HUB_SC=<name of storage class>\r\n \r\nexport HUB_SC_ARGS=" --set persistence\\\r\n.storageClass="${HUB_SC}" --set core\\\r\n.persistentVolume.storageClass\\\r\n="${HUB_SC}" --set master.persistence\\\r\n.storageClass="${HUB_SC}" "\n'})}),"\n",(0,t.jsx)(n.h4,{id:"custom-parameters",children:"Custom parameters"}),"\n",(0,t.jsx)(n.p,{children:"A list of different databases in use by Virtalis Hub and how to customize their storage is shown below."}),"\n",(0,t.jsxs)(n.p,{children:["The default values can be found in ",(0,t.jsx)(n.code,{children:"/home/root/Hub/k8s/misc//values-common.yaml"})," and ",(0,t.jsx)(n.code,{children:"/home/root/Hub/k8s/misc//values-prod.yaml"})]}),"\n",(0,t.jsx)(n.h5,{id:"minio",children:"MinIO"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to the persistence: section found in the ",(0,t.jsx)(n.a,{href:"https://github.com/bitnami/charts/blob/0a851a9c296d5934138dca02032325710f6e71ed/bitnami/minio/values.yaml",children:"values.yaml"})," file in the Bitnami Minio helm chart repository for a list of available parameters to customize such as size, access modes and so on."]}),"\n",(0,t.jsx)(n.h5,{id:"neo4j",children:"Neo4j"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to the core: persistentVolume: section found in the ",(0,t.jsx)(n.a,{href:"https://github.com/neo4j-contrib/neo4j-helm/blob/4.1.1-2/values.yaml",children:"values.yaml"})," file in the Neo4j helm chart repository for a list of available parameters to customize such as size, access modes and so on."]}),"\n",(0,t.jsxs)(n.p,{children:["Alternatively, the Neo4j helm chart configuration documentation can also be found ",(0,t.jsx)(n.a,{href:"https://neo4j.com/labs/neo4j-helm/1.0.0/configreference/",children:"here"}),"."]}),"\n",(0,t.jsx)(n.h5,{id:"mysql",children:"MySQL"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to the master: persistence: section found in the ",(0,t.jsx)(n.a,{href:"https://github.com/bitnami/charts/blob/eeda6fcba43e1e98f37174479eb994badd2f5241/bitnami/mysql/values.yaml",children:"values.yaml"}),"\r\nfile in the Bitnami Mysql helm chart repository for a list of available parameters to customize such as size, access modes and so on."]}),"\n",(0,t.jsx)(n.h5,{id:"miscellaneous",children:"Miscellaneous"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to the persistence: section found in the ",(0,t.jsx)(n.a,{href:"https://github.com/bitnami/charts/blob/8573a62618e8214c20a69e61128d8525ca4a00f2/bitnami/rabbitmq/values.yaml",children:"values.yaml"})," file in the Bitnami Rabbitmq helm chart repository for a list of available parameters to customize such as size, access modes and so on."]}),"\n",(0,t.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,t.jsx)(n.p,{children:"Create a namespace:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'kubectl create namespace "${HUB_NAMESPACE}"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Add namespace labels:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl label namespace ingress-nginx hub-ingress=true; \\\r\nkubectl label namespace kube-system hub-egress=true\r\nThe \u2018ingress-nginx\u2019 entry on line 1 will have to be modified if your nginx ingress is deployed to a different namespace.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"configure-tls",children:"Configure TLS"}),"\n",(0,t.jsx)(n.p,{children:"Manually create a TLS secret from a TLS key and cert or use the LetsEncrypt integration with cert-manager."}),"\n",(0,t.jsx)(n.h4,{id:"manually-creating-a-tls-cert-secret",children:"Manually Creating a TLS Cert Secret"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'kubectl create secret tls -n "${HUB_NAMESPACE}" \\\r\n"${TLS_SECRET_NAME}" --key="tls.key" --cert="tls.crt"\n'})}),"\n",(0,t.jsx)(n.h4,{id:"letsencrypt-with-cert-manager",children:"LetsEncrypt with Cert-manager"}),"\n",(0,t.jsx)(n.p,{children:"Requirements:"}),"\n",(0,t.jsx)(n.p,{children:"The machine hosting Virtalis Hub can be accessed via a public IP address (used to validate the ownership of your domain)"}),"\n",(0,t.jsx)(n.p,{children:"A domain that you own (cannot be used for domains ending with .local)"}),"\n",(0,t.jsx)(n.p,{children:"Inbound connections on port 80 are allowed"}),"\n",(0,t.jsx)(n.p,{children:"Create a namespace for cert-manager:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl create namespace cert-manager\n"})}),"\n",(0,t.jsx)(n.p,{children:"Install the recommended version of cert-manager:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl apply -f https://github.com/jetstack/\\\r\ncert-manager/releases/download/v1.7.1/cert-manager.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Create a new file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"nano prod_issuer.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Paste in the following and replace variables wherever appropriate:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"apiVersion: cert-manager.io/\r\nkind: ClusterIssuer\r\nmetadata:\r\n   name: letsencrypt-prod\r\n   namespace: cert-manager\r\nspec:\r\n   acme:\r\n       server: https://acme-v02.api.letsencrypt.org/directory\r\n       # Email address used for ACME registration\r\n       email: <YOUR_EMAIL_ADDRESS>\r\n       privateKeySecretRef:\r\n               name: hub-tls-cert\r\n    solvers:\r\n       - http01:\r\n               ingress:\r\n                   class: nginx\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Press ",(0,t.jsx)(n.code,{children:"Ctrl"})," + ",(0,t.jsx)(n.code,{children:"O"})," then ",(0,t.jsx)(n.code,{children:"Enter"})," to save and then press ",(0,t.jsx)(n.code,{children:"Ctrl"})," + ",(0,t.jsx)(n.code,{children:"X"})," to exit nano. Now apply the file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl apply -f prod_issuer.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Source: How to Set Up an Nginx Ingress with Cert-Manager on DigitalOcean Kubernetes | DigitalOcean"}),"\n",(0,t.jsx)(n.p,{children:"If you wish to do so, you can follow the digital ocean guide above and deploy an example service to test cert-manager before using it on Virtalis Hub."}),"\n",(0,t.jsx)(n.h3,{id:"download-installation-files",children:"Download Installation Files"}),"\n",(0,t.jsx)(n.p,{children:"Log in with Oras:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'oras login "${ACR_REGISTRY_NAME}".azurecr.io \\\r\n--username "${ACR_USERNAME}" \\\r\n-p "${ACR_PASSWORD}"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Pull the Kubernetes deployment file archive from the Virtalis registry and unzip it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'oras pull "${ACR_REGISTRY_NAME}"\\\r\n.azurecr.io/misc/k8s:$HUB_VERSION &&\r\ntar -zxvf k8s.tar.gz\n'})}),"\n",(0,t.jsx)(n.p,{children:"Make the installation scripts executable:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cd k8s && sudo chmod +x *.sh && sudo chmod +x misc/keycloak/migration/*.sh\n"})}),"\n",(0,t.jsx)(n.h3,{id:"create-and-deploy-secrets",children:"Create and Deploy Secrets"}),"\n",(0,t.jsx)(n.p,{children:"Randomised secrets are used to securely interconnect the Virtalis Hub microservices."}),"\n",(0,t.jsx)(n.p,{children:"The script below uses the pwgen package to generate a random string of 30 alphanumeric characters. Before proceeding, make sure pwgen is installed on your machine."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./create-secrets.sh\n"})}),"\n",(0,t.jsx)(n.h3,{id:"deploy-virtalis-hub-and-database-services",children:"Deploy Virtalis Hub and Database Services"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"./deploy.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"Wait until all pods are showing up as Ready:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"watch -n2 kubectl get pods -n $HUB_NAMESPACE\n"})}),"\n",(0,t.jsx)(n.p,{children:"You will now be able to access the Virtalis Hub frontend client by opening the domain Virtalis Hub was installed on in a web-browser."}),"\n",(0,t.jsx)(n.h4,{id:"retrieving-the-keycloak-admin-password",children:"Retrieving the Keycloak Admin Password"}),"\n",(0,t.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'kubectl get secret --namespace ${HUB_NAMESPACE} \\\r\nkeycloak -o jsonpath="{.data.admin_password}" \\\r\n| base64 --decode; echo\n'})}),"\n",(0,t.jsx)(n.p,{children:"Refer to Virtalis Hub User Management for more information on how to administer the system inside Keycloak."}),"\n",(0,t.jsx)(n.h3,{id:"clean-up",children:"Clean-up"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"unset HUB_DOMAIN && \\\r\nunset TLS_SECRET_NAME && \\\r\nunset HUB_NAMESPACE && \\\r\nunset ACR_USERNAME && \\\r\nunset ACR_PASSWORD && \\\r\nunset ACR_REGISTRY_NAME && \\\r\nunset HUB_SC && \\\r\nunset HUB_SC_ARGS && \\\r\nunset hub_licence__key && \\\r\nunset hub_licence__signature\n"})}),"\n",(0,t.jsx)(n.p,{children:"Clear bash history:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"history -c\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will clean up any secrets exported in the system."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(96540);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);