"use strict";(self.webpackChunkvirtalis_docs=self.webpackChunkvirtalis_docs||[]).push([[70786],{66085:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"visionary-render-programming/plugins/tutorials/lua-function","title":"Provide a Lua Function","description":"Registration","source":"@site/docs/visionary-render-programming/plugins/tutorials/lua-function.mdx","sourceDirName":"visionary-render-programming/plugins/tutorials","slug":"/visionary-render-programming/plugins/tutorials/lua-function","permalink":"/visionary-render-programming/plugins/tutorials/lua-function","draft":false,"unlisted":false,"editUrl":"https://github.com/virtalis/docs/tree/master/docs/visionary-render-programming/plugins/tutorials/lua-function.mdx","tags":[],"version":"current","lastUpdatedAt":1730817102000,"frontMatter":{},"sidebar":"visionaryRenderProgrammingSidebar","previous":{"title":"Use the Foreign Function Interface (FFI)","permalink":"/visionary-render-programming/plugins/tutorials/ffi"},"next":{"title":"Present a Modal dialog","permalink":"/visionary-render-programming/plugins/tutorials/modal-dialog"}}');var t=r(74848),a=r(28453);const o={},s="Provide a Lua Function",l={},u=[{value:"Registration",id:"registration",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"provide-a-lua-function",children:"Provide a Lua Function"})}),"\n",(0,t.jsx)(e.h2,{id:"registration",children:"Registration"}),"\n",(0,t.jsx)(e.p,{children:"Native plugins can register functions to be called from Lua. Currently these can only be registered in the global table, and cannot replace existing functions of the same name."}),"\n",(0,t.jsx)(e.p,{children:"This is done using VRFFIRegister."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:'static HFFIVar multiply(int argc, HFFIVar* argv, void*) {\r\n  return VRFFIMakeDouble(VRFFIGetDouble(argv[0]) * VRFFIGetDouble(argv[1]));\r\n}\r\n\r\nPLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPInit()\r\n{\r\n  VRPLUGIN_LOADVRTREE;\r\n\r\n  VRFFIRegister("SpecialMultiply", &multiply, 2, nullptr);\r\n\r\n  return 0;\r\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"In the above example, our new multiply function can be used directly in the Lua console or in any script event:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"print(SpecialMultiply(5, 5)) -- prints 25\n"})}),"\n",(0,t.jsx)(e.p,{children:"Lua plugins do not need to perform any registration - any non-local functions implemented in a plugin module are automatically available."})]})}function d(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>s});var i=r(96540);const t={},a=i.createContext(t);function o(n){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);