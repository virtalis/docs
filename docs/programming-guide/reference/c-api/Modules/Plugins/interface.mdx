---
title: Interface
summary: Defines an interface for plugins to implement in order to be loadable by VRTree. 
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Interface

**Module:** **[Plugins](../Modules/group__api__plugins.mdx)**

Defines an interface for plugins to implement in order to be loadable by VRTree. 

## Types

| Type           | Name           |
| -------------- | -------------- |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPCleanupProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpcleanupproc)** <br />Function prototype for the plugin cleanup function.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPDefaultRecipeProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpdefaultrecipeproc)** <br />Function prototype for getting the name of the default recipe file used by the importer.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPDependsProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpdependsproc)** <br />Function prototype for getting the plugin dependencies.  |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(const char *outFile, HNode fromRoot, HNode fromScenes, HNode fromLibs, const char *recipePath) | **[VRPExportProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpexportproc)** <br />Function prototype for an export function.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPFFINamespaceProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpffinamespaceproc)** <br />Function prototype for getting the FFI namespace/module name to use for this plugin.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPFormatsProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpformatsproc)** <br />Function prototype for getting the XML description of formats accepted by [VRPImportProc.  |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPGetAPIVersionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpgetapiversionproc)** <br />Function prototype for the API version functions.  |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(const char *permissions) | **[VRPHasPermissionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrphaspermissionproc)** <br />Function prototype for checking permission to do something. Plugin will be passed a check function if it exports [VRPRegisterHasPermissionProc.  |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(const char *file, HNode root, HNode scenes, HNode libs, uint64_t flags, const char *recipePath) | **[VRPImportProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpimportproc)** <br />Function prototype for an import function.  |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPInitProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpinitproc)** <br />Function prototype for the plugin init function.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPLockedProc](../Modules/group__api__plugin__interface.mdx#typedef-vrplockedproc)** <br />Function prototype for getting the plugin lock condition.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(char indent) | **[VRPLogIndentProc](../Modules/group__api__plugin__interface.mdx#typedef-vrplogindentproc)** <br />Function prototype for the log indent function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(int type, const char *message) | **[VRPLogProc](../Modules/group__api__plugin__interface.mdx#typedef-vrplogproc)** <br />Function prototype for the log function.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPNameProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpnameproc)** <br />Function prototype for getting the plugin full name.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(int currentValue, int maxValue, const char *message) | **[VRPProgressYieldProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpprogressyieldproc)** <br />Function prototypes for a progress yield function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPHasPermissionProc) | **[VRPRegisterHasPermissionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterhaspermissionproc)** <br />Function prototype for registering a permission check function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPLogIndentProc) | **[VRPRegisterLogIndentProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterlogindentproc)** <br />Function prototype for being given a log indent function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPLogProc) | **[VRPRegisterLogProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterlogproc)** <br />Function prototype for being given a log function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPProgressYieldProc) | **[VRPRegisterProgressYieldProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterprogressyieldproc)** <br />Function prototype for registering a progress yield function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPRequestPermissionProc) | **[VRPRegisterRequestPermissionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterrequestpermissionproc)** <br />Function prototype for registering a permission request function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPUserMessageProc) | **[VRPRegisterUserMessageProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterusermessageproc)** <br />Function prototype for registering a message function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPUserQuestionCallbackRegisterProc) | **[VRPRegisterUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisteruserquestioncallbackproc)** <br />Function prototype for registering a question callback function.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPUserQuestionProc) | **[VRPRegisterUserQuestionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisteruserquestionproc)** <br />Function prototype for registering a question function.  |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(const char *permissions, const char *cancelCaption) | **[VRPRequestPermissionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrprequestpermissionproc)** <br />Function prototype for requesting permission to do something.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPSettingsInterfaceProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpsettingsinterfaceproc)** <br />Function prototype for getting the XML description of the settings that should be presented in a user interface.  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPShortNameProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpshortnameproc)** <br />Function prototype for getting the plugin short name (-import shortcut)  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPSignatureProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpsignatureproc)** <br />Function prototype for getting the plugin signature (license)  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(const char *message) | **[VRPUserMessageProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpusermessageproc)** <br />Function prototype for triggering an application dialog containing a message to present directly to the user.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(int result, void *userData) | **[VRPUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestioncallbackproc)** <br />Function prototype for a callback to call when a user chooses an option presented by a UserQuestion.  |
| typedef void([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(VRPUserQuestionCallbackProc proc, void *userData) | **[VRPUserQuestionCallbackRegisterProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestioncallbackregisterproc)** <br />Function prototype for registering a [VRPUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestioncallbackproc) as the callback for UserQuestion dialogs.  |
| typedef int([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(const char *message) | **[VRPUserQuestionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestionproc)** <br />Function prototype for triggering an application dialog containing a question to ask to the user. This also requires a registered [VRPUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestioncallbackproc).  |
| typedef const char *([VRTREE_APIENTRY](../Modules/group__api__plugins.mdx#define-vrtree-apientry) *)(void) | **[VRPVersionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpversionproc)** <br />Function prototype for getting the plugin version (human readable, not API version)  |

## Attributes

| Type           | Name           |
| -------------- | -------------- |
| const int | **[PLUGIN_API_VERSION_MAJOR](../Modules/group__api__plugin__interface.mdx#plugin-api-version-major)** <br />incremented if backward compatibility is broken  |
| const int | **[PLUGIN_API_VERSION_MINOR](../Modules/group__api__plugin__interface.mdx#plugin-api-version-minor)** <br />incremented if new exports are added  |

## Types Documentation

### typedef VRPCleanupProc

```cpp
typedef int(VRTREE_APIENTRY * VRPCleanupProc) (void);
```

Function prototype for the plugin cleanup function. 

**Return**: 0 for success (not currently used) 

**Example**:

```cpp
PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPCleanup()
{
  return 0; //success
}
```

This function is called by the loader, before unloading the plugin.

The plugin should implement this to remove any state added to VRTree during any other plugin functions. 

### typedef VRPDefaultRecipeProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPDefaultRecipeProc) (void);
```

Function prototype for getting the name of the default recipe file used by the importer. 

**Return**: A name of a recipe file to use as the default name (e.g. "myrecipe.vrcp") 

**Note**: Any plugin implementing import or export functionality must provide this function as `VRPDefaultRecipe` for importers, and `VRPExportDefaultRecipe` for exporters 

**Example**:

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPDefaultRecipe()
{
  return "myRecipe.vrcp";
}

PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPExportDefaultRecipe()
{
  return "myExportRecipe.vrcp";
}
```

### typedef VRPDependsProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPDependsProc) (void);
```

Function prototype for getting the plugin dependencies. 

**Return**: Comma separated list of plugin names (either names reported by plugins, or their filenames without extension) 

**Example**:

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPDepends()
{
  return "Another Plugin Name, anotherpluginfile"; // first by name, second by file
} 
```

This defines the order which plugins are loaded, ensuring that any plugins that this one depends on are loaded first. 

### typedef VRPExportProc

```cpp
typedef int(VRTREE_APIENTRY * VRPExportProc) (const char *outFile, HNode fromRoot, HNode fromScenes, HNode fromLibs, const char *recipePath);
```

Function prototype for an export function. 

**Parameters**: 

  * **outFile** absolute path to the output file (this will be the root file name in the case of multi-file output) 
  * **fromRoot** the root of the tree 
  * **fromScenes** the node in the scenes tree to start export from 
  * **fromLibs** the node in the libs tree to start export from 
  * **recipePath** absolute path to a recipe file describing advanced configuration 

**Return**: 0 on success 

**Example**:

```cpp
PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPExport(const char* outFile, HNode fromRoot, HNode fromScenes, HNode fromLibs, const char* recipe)
{
  // write some nodes to outFile...
  return 0; //success
}
```

This function is passed a path to a file and some nodes and is expected to write data from the nodes to the file. The implementation should respect the callers requests to export the specified nodes rather than the whole tree. 

### typedef VRPFFINamespaceProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPFFINamespaceProc) (void);
```

Function prototype for getting the FFI namespace/module name to use for this plugin. 

**Return**: Lua-safe ffi module name (letters, numbers and underscores, not beginning with a digit) 

**Example**:

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPFFINamespace()
{
  return "MyPlugin";
} 
```

This specifies the namespace to use for registered FFI functions. For a plugin with ffi namespace "MyPlugin" and a registered FFI function "foo", it will be accessible in lua as MyPlugin.foo() If the specified namespace is already in use by another loaded plugin it will be ignored. If this is blank, the namespace will be inferred from VRPName() or the module name. 

### typedef VRPFormatsProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPFormatsProc) (void);
```

Function prototype for getting the XML description of formats accepted by [VRPImportProc. 

**Return**: XML document describing the accepted formats 

**Example**:

<Tabs>
<TabItem value="c" label="C">

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPFormats()
{
  return "<filetypes> \
    <type ext=\"txt\" desc=\"Text File\" /> \
  </filetypes>";
}
```

</TabItem>
<TabItem value="xml" label="XML">

```xml
<filetypes>
  <type ext="txt" desc="Text File" />
</filetypes>
```

</TabItem>
</Tabs>

**Schema**: 

```xml
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="filetypes">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="type" maxOccurs="unbounded" minOccurs="1">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="ext" use="required"/>
                <xs:attribute type="xs:string" name="desc" use="required"/>
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
```

### typedef VRPGetAPIVersionProc

```cpp
typedef int(VRTREE_APIENTRY * VRPGetAPIVersionProc) (void);
```

Function prototype for the API version functions. 

**Return**: Value of [PLUGIN_API_VERSION_MAJOR](../Modules/group__api__plugin__interface.mdx#plugin-api-version-major) for `VRPGetAPIVersionMajor`, Value of [PLUGIN_API_VERSION_MINOR](../Modules/group__api__plugin__interface.mdx#plugin-api-version-minor) for `VRPGetAPIVersionMinor`

**Note**: `vrtree-linker` provides [VRPLUGIN_API_STDIMPL](../Modules/group__api__plugin__utils.mdx#define-vrplugin-api-stdimpl) to implement these automatically 

**Example**:

```cpp
PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPGetAPIVersionMajor()
{
  return 1;
}

PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPGetAPIVersionMinor()
{
  return 2;
}
```

Plugins should implement both `VRPGetAPIVersionMajor` and `VRPGetAPIVersionMinor` with this function signature. 

### typedef VRPHasPermissionProc

```cpp
typedef int(VRTREE_APIENTRY * VRPHasPermissionProc) (const char *permissions);
```

Function prototype for checking permission to do something. Plugin will be passed a check function if it exports [VRPRegisterHasPermissionProc. 

**Parameters**: 

  * **permissions** comma-separated list of permission names to request. When specifying more than one, all are required for the check to pass. 

**Return**: 1 if the check is successful 

This mainly corresponds to VRTree permissions - the plugin may check for permissions (such as EditScript), and it may request permissions be obtained from the licensing mechanism. 

### typedef VRPImportProc

```cpp
typedef int(VRTREE_APIENTRY * VRPImportProc) (const char *file, HNode root, HNode scenes, HNode libs, uint64_t flags, const char *recipePath);
```

Function prototype for an import function. 

**Parameters**: 

  * **file** absolute path to the file to be imported 
  * **root** the root of the tree 
  * **scenes** the scenes root node to import assembly data into 
  * **libs** the library root node to import assets into 
  * **flags** any additional flags that should be applied to nodes 
  * **recipePath** absolute path to a recipe file describing advanced configuration 

**Return**: 0 on success 

**Example**:

```cpp
PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPImport(const char* file, HNode root, HNode scenes, HNode libs, uint64_t flags, const char* recipe)
{
  // create some nodes in the tree...
  return 0; //success
}
```

This function is passed a path to a file, and is expected to do some work with it The implementation should respect the callers requests to import onto nodes that are not the default scenes/libs nodes 

### typedef VRPInitProc

```cpp
typedef int(VRTREE_APIENTRY * VRPInitProc) (void);
```

Function prototype for the plugin init function. 

**Return**: 0 for success, any positive integer to fail and abort the plugin init 

**Example**:

```cpp
PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPInit()
{
  return 0; //success
}
```

This function is called by the loader, after checking the major version and performing any other registration requested by the plugin. This means that `VRPInit` may check permissions or write to the log, or do whatever else was registered. 

### typedef VRPLockedProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPLockedProc) (void);
```

Function prototype for getting the plugin lock condition. 

**Return**: The lock condition. 

**Example**:

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPLocked()
{
  return true;
}
```

### typedef VRPLogIndentProc

```cpp
typedef void(VRTREE_APIENTRY * VRPLogIndentProc) (char indent);
```

Function prototype for the log indent function. 

**Parameters**: 

  * **indent** boolean for increasing or decreasing indent. Pass 0 to decrease indent, any positive value to increase indent. 

Some log messages need to have more complex formatting, so plugins can use this function to indent all further log messages. Plugin will be passed a log indent function to use for logging, if it exports [VRPRegisterLogIndentProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterlogindentproc). 

### typedef VRPLogProc

```cpp
typedef void(VRTREE_APIENTRY * VRPLogProc) (int type, const char *message);
```

Function prototype for the log function. 

**Parameters**: 

  * **type** type of message:

* 0 = Info
* 1 = Warning
* 2 = Error
* 3 = Debug 
  * **message** the text to write to the log 

Plugin will be passed a log function to use for logging, if it exports [VRPRegisterLogProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterlogproc). 

### typedef VRPNameProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPNameProc) (void);
```

Function prototype for getting the plugin full name. 

**Return**: The name of the plugin. Must be a valid string. 

**Note**: All plugins are required to implement this function. 

**Example**:

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPName()
{
  return "My Plugin";
}
```

### typedef VRPProgressYieldProc

```cpp
typedef void(VRTREE_APIENTRY * VRPProgressYieldProc) (int currentValue, int maxValue, const char *message);
```

Function prototypes for a progress yield function. 

**Parameters**: 

  * **currentValue** the current progress through the operation, if greater than zero will be represented by a progress bar 
  * **maxValue** the maximum progress value, if greater than zero will be represented by the end of the progress bar 
  * **message** the message to set on the progress display. If 0, the message does not change from whatever is already there. 

**Note**: The plugin execution will be blocked by calls to yield, until the application returns control to it. 

Plugin will be passed a yield function to call during long operations, if it exports the [VRPRegisterProgressYieldProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterprogressyieldproc) function. 

### typedef VRPRegisterHasPermissionProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterHasPermissionProc) (VRPHasPermissionProc);
```

Function prototype for registering a permission check function. 

**Note**: `vrtree-linker` provides [VRPLUGIN_API_PERMISSIONIMPL](../Modules/group__api__plugin__utils.mdx#define-vrplugin-api-permissionimpl) to provide [VRPLUGIN_INIT_PERMISSION](../Modules/group__api__plugin__utils.mdx#define-vrplugin-init-permission) and [VRPLUGIN_IMPORT_PERMISSION](../Modules/group__api__plugin__utils.mdx#define-vrplugin-import-permission)

Plugin should implement this and store the pointer it is given, if it wants to do license checks 

### typedef VRPRegisterLogIndentProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterLogIndentProc) (VRPLogIndentProc);
```

Function prototype for being given a log indent function. 

**Note**: `vrtree-linker` provides [VRPLUGIN_API_LOGIMPL](../Modules/group__api__plugin__utils.mdx#define-vrplugin-api-logimpl) to provide `s_logFunc` and `s_logIndentFunc`

**Example**:

```cpp
static VRPLogProc s_logFunc = 0;
static VRPLogIndentProc s_logIndentFunc = 0;

PLUGIN_ENTRY_POINT void VRTREE_APIENTRY VRPRegisterLog(VRPLogProc proc) 
{
  s_logFunc = proc;
}

PLUGIN_ENTRY_POINT void VRTREE_APIENTRY VRPRegisterLogIndent(VRPLogIndentProc proc) 
{
  s_logIndentFunc = proc;
}

PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPInit()
{
  if(s_logFunc && s_logIndentFunc) {
    s_logIndentFunc(1);
    s_logFunc(2, "This is an INDENTED error message\n");
    s_logIndentFunc(1);
    s_logFunc(2, "This is a 2-deep indented error message\n");
    s_logIndentFunc(0);
    s_logIndentFunc(0);
  }
}
```

Plugin should implement this and store the pointer it is given, if it wishes to make use of the log indent functionality.

The indent levels should match (e.g. if you indent twice, you should unindent twice, too) 

### typedef VRPRegisterLogProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterLogProc) (VRPLogProc);
```

Function prototype for being given a log function. 

**Note**: `vrtree-linker` provides [VRPLUGIN_API_LOGIMPL](../Modules/group__api__plugin__utils.mdx#define-vrplugin-api-logimpl) to provide `s_logFunc` and `s_logIndentFunc`

**Example**:

```cpp
static VRPLogProc s_logFunc = 0;

PLUGIN_ENTRY_POINT void VRTREE_APIENTRY VRPRegisterLog(VRPLogProc proc) 
{
  s_logFunc = proc;
}

PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPInit()
{
  if(s_logFunc)
    s_logFunc(2, "This is an error message\n");
}
```

Plugin should implement this and store the pointer it is given, if it wishes to log to the application log. To write a log message, the plugin should call the provided log function directly 

### typedef VRPRegisterProgressYieldProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterProgressYieldProc) (VRPProgressYieldProc);
```

Function prototype for registering a progress yield function. 

**Note**: `vrtree-linker` provides [VRPLUGIN_API_YIELDIMPL](../Modules/group__api__plugin__utils.mdx#define-vrplugin-api-yieldimpl) to provide progress_yield 

**Example**:

```cpp
static VRPProgressYieldProc s_progress = 0;

PLUGIN_ENTRY_POINT void VRTREE_APIENTRY VRPRegisterProgressYield(VRPProgressYieldProc proc)
{
  s_progress = proc;
}

PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPImport(const char* file, HNode root, HNode scenes, HNode libs, uint64_t flags, const char* recipe)
{
  // create some nodes in the tree...
  s_progress(0, nObjects, "Importing file...");
  for(int i = 0; i < nObjects ++i) {
    doLongImport(objects[i]);
    s_progress(i, nObjects, 0);
  }
  return 0; //success
}
```

Plugin should implement this and store the pointer it is given, if it wishes to yield to the application during long operations. 

### typedef VRPRegisterRequestPermissionProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterRequestPermissionProc) (VRPRequestPermissionProc);
```

Function prototype for registering a permission request function. 

**Note**: `vrtree-linker` provides [VRPLUGIN_API_PERMISSIONIMPL](../Modules/group__api__plugin__utils.mdx#define-vrplugin-api-permissionimpl) to provide [VRPLUGIN_INIT_PERMISSION](../Modules/group__api__plugin__utils.mdx#define-vrplugin-init-permission) and [VRPLUGIN_IMPORT_PERMISSION](../Modules/group__api__plugin__utils.mdx#define-vrplugin-import-permission)

Plugin should implement this and store the pointer it is given, if it wants to do license requests 

### typedef VRPRegisterUserMessageProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterUserMessageProc) (VRPUserMessageProc);
```

Function prototype for registering a message function. 

**Example**:

```cpp
//This example registers a Lua function which, when called from Lua, summons a message box
static VRPUserMessageProc s_msgProc = 0;

PLUGIN_ENTRY_POINT void VRTREE_APIENTRY VRPRegisterUserMessage(VRPUserMessageProc proc)
{
  s_msgProc = proc;
}

static HFFIVar msg_func(int argc, HFFIVar* argv, void*) {
  if(s_msgProc)
    s_msgProc("Hello, this is a message box");
  return 0;
}

PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPInit()
{
  //...
  // Registers msg_func as Lua function "helloMessage"
  VRFFIRegister("helloMessage", &msg_func, 0, 0);
}
```

Plugin should implement this and store the pointer it is given, if it wishes to summon message boxes. 

### typedef VRPRegisterUserQuestionCallbackProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterUserQuestionCallbackProc) (VRPUserQuestionCallbackRegisterProc);
```

Function prototype for registering a question callback function. 

Plugin should implement this and use the pointer it is given to register a callback to be called by question boxes summoned by a [VRPUserQuestionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestionproc)

This is not useful without also implementing [VRPRegisterUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisteruserquestioncallbackproc)

### typedef VRPRegisterUserQuestionProc

```cpp
typedef void(VRTREE_APIENTRY * VRPRegisterUserQuestionProc) (VRPUserQuestionProc);
```

Function prototype for registering a question function. 

**Example**:

```cpp
//This example registers a Lua function which, when called from Lua, summons a question box
static VRPUserQuestionProc s_qProc = 0;
static void question_callback(int result, void* userData) {
   //result is the option the user chose
}

PLUGIN_ENTRY_POINT void VRTREE_APIENTRY VRPRegisterUserQuestionCallback(VRPUserQuestionCallbackProc proc)
{
  proc(&question_callback, 0); //register our callback proc.
  // we could also store proc and register different functions for different questions
}

PLUGIN_ENTRY_POINT void VRTREE_APIENTRY VRPRegisterUserQuestion(VRPUserQuestionProc proc)
{
  s_qProc = proc;
}

static HFFIVar question_func(int argc, HFFIVar* argv, void*) {
  if(s_qProc) {
    s_qProc("Is this a dialog box?"); //user input on this dialog calls question_callback
  }
  return 0;
}

PLUGIN_ENTRY_POINT int VRTREE_APIENTRY VRPInit()
{
  //...
  // Registers question_func as Lua function "askQuestion"
  VRFFIRegister("askQuestion", &question_func, 0, 0);
}
```

Plugin should implement this and store the pointer it is given, if it wishes to summon question boxes. 

### typedef VRPRequestPermissionProc

```cpp
typedef int(VRTREE_APIENTRY * VRPRequestPermissionProc) (const char *permissions, const char *cancelCaption);
```

Function prototype for requesting permission to do something. 

**Parameters**: 

  * **permissions** comma-separated list of permission names to request. When specifying more than one, all are required for the check to pass. 
  * **cancelCaption** optional caption to display on the cancel button of any license request dialog presented by the application to fulfil the request. 

**Return**: 1 if the request is successful 

Plugin will be passed a request function if it exports [VRPRegisterRequestPermissionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterrequestpermissionproc)

### typedef VRPSettingsInterfaceProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPSettingsInterfaceProc) (void);
```

Function prototype for getting the XML description of the settings that should be presented in a user interface. 

**Return**: XML document describing the settings 

**Example**:

<Tabs>
<TabItem value="c" label="C">

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPSettingsInterface()
{
  return "<recipe> \
    <Page name=\"Basic\"> \
      <IntBox label=\"Log Level\" name=\"loglevel\" value=\"0\" min=\"0\" max=\"4\" desc=\"Set log level\"/> \
      <Selection label=\"Unit\" name=\"vrUnit\" value=\"meters\" options=\"meters,milimeters,centimeters\" desc=\"Unit of values in the file\"/> \
    </Page> \
  </recipe>";
}
```

</TabItem>
<TabItem value="xml" label="XML">

```xml
<recipe>
  <Page name="Basic">
    <IntBox label="Log Level" name="loglevel" value="0" min="0" max="4" desc="Set log level"/> 
    <Selection label="Unit" name="vrUnit" value="meters" options="meters,milimeters,centimeters" desc="Unit of values in the file"/> 
  </Page>
</recipe>
```

</TabItem>
</Tabs>

**Schema**: 

```xml
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="recipe">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Page" maxOccurs="unbounded" minOccurs="0">
          <xs:complexType mixed="true">
            <xs:choice maxOccurs="unbounded" minOccurs="0">
              <xs:element name="StringEdit">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="label" use="optional"/>
                      <xs:attribute type="xs:string" name="name" use="optional"/>
                      <xs:attribute type="xs:string" name="value" use="optional"/>
                      <xs:attribute type="xs:string" name="readonly" use="optional"/>
                      <xs:attribute type="xs:string" name="desc" use="optional"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="IntBox">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="label"/>
                      <xs:attribute type="xs:string" name="name"/>
                      <xs:attribute type="xs:byte" name="value"/>
                      <xs:attribute type="xs:byte" name="min"/>
                      <xs:attribute type="xs:byte" name="max"/>
                      <xs:attribute type="xs:string" name="desc"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Selection">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="label" use="optional"/>
                      <xs:attribute type="xs:string" name="name" use="optional"/>
                      <xs:attribute type="xs:string" name="value" use="optional"/>
                      <xs:attribute type="xs:string" name="options" use="optional"/>
                      <xs:attribute type="xs:string" name="desc" use="optional"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Check">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="label" use="optional"/>
                      <xs:attribute type="xs:string" name="name" use="optional"/>
                      <xs:attribute type="xs:byte" name="value" use="optional"/>
                      <xs:attribute type="xs:string" name="desc" use="optional"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="FloatBox">
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute type="xs:string" name="label" use="optional"/>
                      <xs:attribute type="xs:string" name="name" use="optional"/>
                      <xs:attribute type="xs:float" name="value" use="optional"/>
                      <xs:attribute type="xs:float" name="min" use="optional"/>
                      <xs:attribute type="xs:float" name="max" use="optional"/>
                      <xs:attribute type="xs:string" name="desc" use="optional"/>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
            </xs:choice>
            <xs:attribute type="xs:string" name="name" use="optional"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
```

### typedef VRPShortNameProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPShortNameProc) (void);
```

Function prototype for getting the plugin short name (-import shortcut) 

### typedef VRPSignatureProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPSignatureProc) (void);
```

Function prototype for getting the plugin signature (license) 

**Return**: The license text string provided by Virtalis 

**Note**: Plugins that require access to the VRTree C API must implement this function. 

**Example**:

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPSignature()
{
  return "<some signature signed xml>";
}
```

### typedef VRPUserMessageProc

```cpp
typedef void(VRTREE_APIENTRY * VRPUserMessageProc) (const char *message);
```

Function prototype for triggering an application dialog containing a message to present directly to the user. 

**Parameters**: 

  * **message** the message to display to the user 

**Note**: Since this is a modal dialog, execution of the calling thread may be blocked until the box is dismissed. This does not happen when running on a cluster, so blocking behaviour should not be depended on. Plugins should avoid calling this during `VRPInit` and `VRPCleanup`. 

Plugin will be passed a message function to use if it exports [VRPRegisterUserMessageProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisterusermessageproc)

### typedef VRPUserQuestionCallbackProc

```cpp
typedef void(VRTREE_APIENTRY * VRPUserQuestionCallbackProc) (int result, void *userData);
```

Function prototype for a callback to call when a user chooses an option presented by a UserQuestion. 

**Parameters**: 

  * **result** the index of the option selected 

### typedef VRPUserQuestionCallbackRegisterProc

```cpp
typedef void(VRTREE_APIENTRY * VRPUserQuestionCallbackRegisterProc) (VRPUserQuestionCallbackProc proc, void *userData);
```

Function prototype for registering a [VRPUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestioncallbackproc) as the callback for UserQuestion dialogs. 

Plugin will be passed a register function if it exports [VRPRegisterUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisteruserquestioncallbackproc)

### typedef VRPUserQuestionProc

```cpp
typedef int(VRTREE_APIENTRY * VRPUserQuestionProc) (const char *message);
```

Function prototype for triggering an application dialog containing a question to ask to the user. This also requires a registered [VRPUserQuestionCallbackProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpuserquestioncallbackproc). 

**Parameters**: 

  * **message** the message to display to the user (phrased as a question) 

**Return**: 0 if question is submitted, 1 if there is no registered question callback to receive the user's answer 

**Note**: Since this is a modal dialog, execution of the calling thread may be blocked until the box is dismissed. This does not happen when running on a cluster, so blocking behaviour should not be depended on. Plugins should avoid calling this during `VRPInit` and `VRPCleanup`

Plugin will be passed a question function to use if it exports [VRPRegisterUserQuestionProc](../Modules/group__api__plugin__interface.mdx#typedef-vrpregisteruserquestionproc)

### typedef VRPVersionProc

```cpp
typedef const char*(VRTREE_APIENTRY * VRPVersionProc) (void);
```

Function prototype for getting the plugin version (human readable, not API version) 

**Return**: The version string (e.g. "1.0.5"). Must be a valid string. 

**Note**: All plugins are required to implement this function. 

**Example**:

```cpp
PLUGIN_ENTRY_POINT const char* VRTREE_APIENTRY VRPVersion()
{
  return "1.0.3a";
}
```

## Attributes Documentation

### PLUGIN_API_VERSION_MAJOR

```cpp
const int PLUGIN_API_VERSION_MAJOR = 1;
```

Incremented if backward compatibility is broken 

### PLUGIN_API_VERSION_MINOR

```cpp
const int PLUGIN_API_VERSION_MINOR = 3;
```

Incremented if new exports are added 
