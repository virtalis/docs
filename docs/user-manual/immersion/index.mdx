# Immersion

## Desktop Immersion

Desktop Immersion is built into Visionary Render as standard. It provides out of the box, configuration-free integration with consumer VR systems including:

- Meta Quest 2
- Oculus Rift, Rift S, tracking (software version 1.3 or above)
- HTC Vive, HMD Vive Pro or Valve Index HMD, Lighthouse tracking, pointers (SteamVR version 1.0 or above)
- zSpace (software version 3.1 or above)
- Windows Mixed Reality HMD, Windows MR Portal (SteamVR version 1.0 or above)
- Microsoft HoloLens 2

:::note
HoloLens 2 support was added in the 2021.3 release and the original HoloLens is no longer supported as of this release.
:::

The current mode can be set from the Desktop Immersion menu in the Toolbar.

![](/img/user-manual/chapter22/1.jpg)

Enabling one of the Desktop Immersion modes requires the device to be connected to your computer and configured per the manufacturer's directions. Switching between modes will automatically connect to, and initialise, the requested device.

Switching between Desktop Immersion modes automatically reconfigures the view configuration and avatar as required. Note that you can overwrite the default avatar used by each Desktop Immersion mode via the **Tracking** > **Configuration** > **Avatar** setting.

![](/img/user-manual/chapter22/2.jpg)

When using Oculus or SteamVR modes, the Viewport button becomes available to toggle the mirroring of the HMD view on the main desktop display. Turning this off can improve performance in the headset.

### OpenXR

OpenXR is a new immersive mode in 2023.1 that currently supports the following runtimes:

- Oculus
- Windows Mixed Reality
- HTC Vive

:::note
SteamVR is not currently supported. Other runtimes not listed may still work but we can't make any guarantees.
:::

To use any OpenXR-compatible headset with Visionary Render, follow these steps:

1. Ensure the headset is turned on and connected to the PC, and OpenXR mode is enabled.
2. Launch Visionary Render in standard desktop mode (i.e. no **-viewConfig** or **-tracker** parameters).
3. Open a scene and select the **OpenXR** option from the Desktop Immersion menu in the Toolbar.
4. The headset will now initialise.
5. There are no other settings. The application will remember the display mode and above settings at exit and will start up with **OpenXR** mode enabled automatically from now on.

:::note
If input for your controller or device is awkward or not working, get in touch with us and we can fix it using the bindings in data/openxr/actionBindings.json. We have no way to know nor test the proper bindings for all devices in advance.
:::

### Oculus Touch

To use the Oculus Rift with Visionary Render, follow these steps:

1. Ensure the Oculus Rift is connected to the PC and the latest Oculus Runtimes are installed.
2. Launch Visionary Render in standard desktop mode (i.e. no **-viewConfig** or **-tracker** parameters).
3. If in the Start Room, press the glowing **VR** on the main UI stand. Otherwise select the **Oculus** option from the Desktop Immersion menu in the Toolbar.
4. The Oculus Rift will now initialise.
5. The **Viewport** button in the **Options** rollout will become available to toggle the main window viewport. Turning this off can improve performance in the headset.
6. There are no further settings. The application will remember the display mode at exit and will start up with **Oculus Rift** mode enabled automatically from now on.

:::note
As of the 2023.1 release, the Oculus immersive mode has been renamed Oculus Legacy and can only be accessed from Settings/Tracking/Configuration/Mode. Scripts can still use vrEnableNodeWhenOculusAvailable(vrnode node).
:::

### SteamVR

To use any SteamVR-compatible headset with Visionary Render (such as HTC Vive, Valve Index or Windows Mixed Reality) follow these steps:

1. Ensure the headset is connected to the PC, and SteamVR is installed and running.
2. Launch Visionary Render in standard desktop mode (i.e. no **-viewConfig** or **-tracker** parameters).
3. If in the Start Room, press the glowing **VR** on the main UI stand. Otherwise select the **SteamVR** option from the Desktop Immersion menu in the Toolbar.
4. The headset will now initialise.
5. In the Settings window (**F6**), on the **Tracking** tab, some additional options are available below the Desktop Immersion dropdown box:
    - **Tracking Universe** - specify whether the HTC Vive is being used Seated or Standing.
    - **Enable Visuals** - draws the virtual representations of the Wand controllers and Lighthouses in the scene.
    - **Reset Tracking Origin** - press this when using the Seated Tracking Universe to centre yourself in your seated position.
6. The **Viewport** button in the **Options** rollout will become available to toggle the main window viewport. Turning this off can improve performance in the headset.
7. There are no other settings. The application will remember the display mode and above settings at exit and will start up with **SteamVR** mode enabled automatically from now on.

### zSpace

To use the zSpace with Visionary Render, follow these steps:

1. Ensure the zSpace is connected to the PC and calibrated with the zSpace application.
2. Launch Visionary Render in standard desktop mode (i.e. no **-viewConfig** or **-tracker** parameters).
3. If in the Start Room, press the glowing **VR** on the main UI stand. Otherwise select the **zSpace** option from the Desktop Immersion menu in the Toolbar.
4. The zSpace will now initialise.
5. In the Settings window (**F6**), on the **Tracking** tab, an additional option is available below the Desktop Immersion dropdown box:
    - **Eye IPD** - manually adjust the stereo eye separation on the zSpace display.
6. There are no other settings. The application will remember the display mode and above settings at exit and will start up with **zSpace** mode enabled automatically from now on.

### HoloLens 2

:::note
As of the 2021.3 release, Visionary Render supports the HoloLens 2 and no longer supports the original HoloLens.
:::

To use the HoloLens 2 with Visionary Render, follow these steps:

1. Ensure the HoloLens is connected - by Wi-Fi - to the same network as the PC you are running Visionary Render on.
2. Open the Microsoft Store on the HoloLens and install the Holographic Remoting Player app.
3. Start the Holographic Remoting Player on the HoloLens - it will display the IP address of the HoloLens then wait for a connection to be established.
4. In Visionary Render, enable the HoloLens desktop immersion mode via the Toolbar or Settings window. Once enabled, the connection status window below will be displayed.
5. If this is your first time using HoloLens Remoting, click the Settings button on the connection status window and input your HoloLens IP as displayed by the HoloLens 2 Remoting Player.
6. Visionary Render should now connect to the HoloLens and the HoloLens should switch to displaying your scene. The connection status window will tell you the current connection status.
7. If you need to reconnect at any time you can do so by pressing the Reconnect button on the connection status window. If a loss of connection is detected then Visionary Render will automatically try to reconnect to the HoloLens. ![](/img/user-manual/chapter22/3.jpg)

:::note
See [Augmented Reality](#augmented-reality) for information on using the HoloLens 2.
:::

### Disabled

To disable Desktop Immersion, click on the Toolbar button so that it isn't highlighted. When disabled, the following settings are available in **Settings** > **Tracking**:

- **Eye IPD** - manually adjust the stereo eye separation.
- **Screen Width** - the physical width of the desktop monitor.
- **Field of View** - the field of view of the main viewport.

## Tracking Systems

Visionary Render can be configured to be controlled from various other tracking systems. A tracking system provides a scene with position and orientation data normally based on your head and hand - but not limited to that. The software can then utilise that data to render the 3D scene for a HMD, ActiveWall or ActiveCube.

Visionary Render can be configured to work with various tracking systems such as Polhemus Liberty and Patriot, Intersense IS900, LEAP Motion, Cyberglove, 5DT, Vicon, and ART. It can also communicate with many other devices using VRPN.

It can be configured to work with input devices attached to the tracking system such as Intersense Wand, ART FlyStick, Vicon Apex, Xbox GamePad, and DirectInput Joysticks and GamePads.

For more details on how to configure Visionary Render for specific tracking systems please contact Virtalis Software Support.

## Controls

### Xbox Controller

![](/img/user-manual/chapter22/3.jpg)

*(Image courtesy of developer.oculus.com)*

| Control                    | Action  |
|----------------------------|---------|
| Axis2D.PrimaryThumbstick   | Strafe  |
| Axis2D.SecondaryThumbstick | Look    |

### Oculus Touch

![](/img/user-manual/chapter22/4.jpg)

*(Image courtesy of developer.oculus.com)*

| Control | Action |
| --- | --- |
| Axis2D.PrimaryThumbstick | Move the stick left and right to rotate the camera about the y-axis or forward and back to move in the direction that the stick is pointing. |
| Axis2D.SecondaryThumbstick | Move the stick left and right to strafe or forward and back to change altitude. |
| Button.PrimaryThumbstick | Move in the direction that the camera is pointing. |
| Button.SecondaryThumbstick | Hold to see the teleport arc, release to teleport to target. |
| Button.Two or Button.Four | Open the Immersive Context Menu. |
| Button.Three | Undo. |
| Button.One | Redo. |
| Button.Start | Open the Immersive GUI. |
| Reserved | Open the Oculus homepage. |
| Axis1D.PrimaryIndexTrigger or Axis1D.SecondaryIndexTrigger | Select object pointed to by the laser.Hold and drag selected object to move it. Whilst doing this, move the thumbsticks to fly around the scene with the object. |
| Touch.PrimaryHandTrigger or Touch.SecondaryHandTrigger | When holding down a single hand trigger, move the controller left or right to rotate the camera about the y-axis or up or down to change altitude.When holding down both hand triggers, bring the controllers together to decrease the scale of the scene or away from each other to increase the scale of it. |

### HTC Vive Controllers

| Control | Action |
| --- | --- |
| Up/Down on Touchpad | Move forward or back in the direction that the controller is pointing. |
| Left on Touchpad | Enable or disable the laser pointer. |
| Right on Touchpad | Hold to see the teleport arc, release to teleport to target. |
| Trigger | Open the Immersive Context Menu.Select the object pointed to by the laser.Hold and drag the selected object to move it. Whilst doing this, slide left and right on the touchpad to rotate the selected object about its y-axis or up and down to move the object away from/towards the controller. |
| Menu Button | Open the Immersive GUI. |
| Home Button | Open the SteamVR homepage. |
| Single Grip Button | Hold down this button and rotate the controller to rotate the camera about the y-axis. |
| Both Grip Buttons | Hold down these buttons and:Move the controllers up and down to change altitude or forward and back to move along the direction that the camera is pointing.Bring the controllers together to decrease the scale of the scene or away from each other to increase the scale of it. |

### Windows Mixed Reality Controllers

![](/img/user-manual/chapter22/5.jpg)

*(Image courtesy of developer.microsoft.com)*

| Control | Action |
| --- | --- |
| Left Thumbstick | Move the stick left and right to rotate the camera about the y-axis or forward and back to move in the direction that the stick is pointing. |
| Right Thumbstick | Move the stick left and right to strafe or forward and back to change altitude. |
| Up on Touchpad | Show or hide the Immersive Context Menu. |
| Down on Touchpad | Hold to navigate by moving/turning the controller in the direction you wish to move. |
| Left on Touchpad | Enable or disable the laser pointer. |
| Right on Touchpad | Hold to see the teleport arc, release to teleport to target. |
| Scroll Touchpad | Scroll the Immersive GUI like a mouse wheel would. |
| Select Trigger | Select the object pointed to by the laser.Hold and drag the selected object to move it. Whilst doing this, slide left and right on the touchpad to rotate the selected object about its y-axis or up and down to move the object away from/towards the controller. |
| Windows Button | Open the SteamVR homepage. |
| Menu Button | Open the Immersive GUI. |
| Single Grip Button | Hold down this button and rotate the controller to rotate the camera about the y-axis. |
| Both Grip Buttons | Hold down these buttons and bring the controllers together to decrease the scale of the scene or away from each other to increase the scale of it. |

### zSpace

Whilst looking at the pen from above with the tip pointing away from you:

| Control             | Action                                                     |
|---------------------|------------------------------------------------------------|
| Top Middle Button   | Click on the GUI or select and drag objects in the scene.  |
| Bottom Left Button  | Move forward in the direction that the pen is pointing.    |
| Bottom Right Button | Open the immersive context menu where the pen is pointing. |

### HoloLens 2

The HoloLens 2 supports a single gesture - known as "Air tap" - that can be used to position the scene directly in front of you. To perform the gesture, raise your index finger then bring it down again as in the images below.

![](/img/user-manual/chapter22/6.jpg)

*(Image courtesy of docs.microsoft.com)*

### SteamVR Controller Bindings

You can change the controls for devices that use SteamVR (such as HTC Vive, Valve Index and Windows Mixed Reality) via Steam's binding user interface. To access this menu, run Visionary Render and enable SteamVR tracking. In the **Settings** window, navigate to **Button Map** > **Button Events** and click the **Open SteamVR Bindings** button. Alternatively, this can be accessed in the SteamVR application by selecting **Settings** > **Controllers** > **Manage Controller Bindings** > **Edit This Binding** or **Settings** > **Show Advanced Settings** > **Controllers** > **Show Old Binding UI**.

If Visionary Render is running, you should be able to select **Visionary Render** from the list of applications that SteamVR has found. If you select **Visionary Render** you should be able to see the following screen:

![](/img/user-manual/chapter22/7.jpg)

You can now press the **Edit** button to change the default bindings, as below.

![](/img/user-manual/chapter22/8.jpg)

From here, each button can be reassigned to perform different functions within Visionary Render. To edit a button binding, hover your mouse over the button's dialogue box and press the pen icon. You can also add multiple functions to a button via the plus icon at the top right of each input.

| Actions | Description |
| --- | --- |
| Select | Select objects or GUI options pointed to by the laser.Hold and drag a selected object to move it. |
| Context | Show or hide the context menu (equivalent to right-click on the mouse). |
| Redo | Revert your previous Undo. |
| Undo | Revert your previous change. |
| Toggle Laser | Enable/disable the laser pointers on the controllers. |
| Toggle PRS | Cycle to the next PRS manipulator mode when you have an object selected. |
| Grab | Hold this button on one controller to navigate within the scene – moving and rotating the scene with your hand.Hold this button on both controllers and bring them together to decrease the scale of the scene or away from each other to increase the scale.Hold this button while using the Immersive GUI to scroll the current window (equivalent to the middle button on the mouse). |
| Scale Reset | While scaling scenes using the Grab command, use this action to reset the scale to 1:1. |
| Blink | Hold to see the teleport arc, release to teleport to target. |
| Fly | Enables navigation within the scene by pushing or turning the controller in the direction you wish to fly. |
| Immersive GUI | Brings up the main GUI window |
| Forward | Move forwards in the direction that the controller is pointing. |
| Backward | Move backwards in the direction that the controller is pointing. |
| Down | Move down relative to the controller. |
| Up | Move up relative to the controller. |
| Left | Move left relative to the controller. |
| Right | Move right relative to the controller. |

The remaining options, labelled **Button** followed by a number, have no standardised action but can be used by event handlers in a Visionary Render scene.

If you do not wish to use the SteamVR controller bindings, e.g. to support a scene from an older version of Visionary Render, open the **Settings** window, navigate to **Tracking** > **Configuration** and disable **Use Steam Controller Binding**. You may need to restart Visionary Render before this takes effect.

:::note
If the controls do not work and the SteamVR window shows **Now Playing visren-app** instead of **Now Playing Visionary Render** (and you have not disabled the **Use Steam Controller Binding** option), restart Visionary Render and/or SteamVR.
:::

## Immersive Context Menu

The Immersive Context Menu permits quick access to operations that you might want to perform whilst immersed. It can be opened using your HMD controller or via **Alt** + **Right-click** on a desktop computer.

![](/img/user-manual/chapter22/9.jpg)

When you first open the menu you will see two icons as in the image above - a hamburger to show/hide the main menu and a wrench to show/hide the tool buttons.

:::note
Both menus can be shown at once if you wish.
:::

### Main Menu

The main menu provides typical context menu options like undo/redo, cut, copy, paste, etc.

![](/img/user-manual/chapter22/10.jpg)

The menu has 4 pages:

| Button | Description |
|--------|-------------|
| ![](/img/user-manual/chapter22/11.jpg) | This page shows edit controls such as undo/redo, cut, copy, paste, etc. |
| ![](/img/user-manual/chapter22/12.jpg) | This page permits you to create basic geometric shapes and viewpoints.  |
| ![](/img/user-manual/chapter22/13.jpg) | This page shows all the materials in your scene.                        |
| ![](/img/user-manual/chapter22/14.jpg) | This page shows all the viewpoints in your scene.                       |

### Tool Buttons

The tool buttons provide quick access to some of the tools in the Toolbar that you might want to operate whilst immersed.

![](/img/user-manual/chapter22/15.jpg)

| Button                                                                  | Description                                                                                                                                                                                                                                                                                                                                                                                                   |
|-------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ![](/img/user-manual/chapter22/16.jpg) | Region select intersected or encapsulated objects in the scene with left-click + drag (**Ctrl** + **1**). This is enabled by default. Drag from left to right to select encapsulated objects, and from right to left to select intersected objects. When the toolbar is narrow, this is combined with the measuring and annotation tools in a drop-down (Note: only one of these can be activated at a time). |
| ![](/img/user-manual/chapter22/19.jpg) | Measure distances between points by clicking on objects in the scene (**Ctrl** + **2**).                                                                                                                                                                                                                                                                                                                      |
| ![](/img/user-manual/chapter22/17.jpg) | Annotate objects in the scene by clicking on them (**Ctrl** + **3**).                                                                                                                                                                                                                                                                                                                                         |
| ![](/img/user-manual/chapter22/18.jpg) | Show the PRS manipulator to move, rotate and scale selected objects in the scene (**F9**). The drop-down menu permits the manipulators to be shown individually.                                                                                                                                                                                                                                              |
| ![](/img/user-manual/chapter22/20.jpg) | Show helpers (for lights and particle systems, etc.).                                                                                                                                                                                                                                                                                                                                                         |
| ![](/img/user-manual/chapter22/21.jpg)  | Snap selected objects in the scene when dragged near a previous transform (**F4**).                                                                                                                                                                                                                                                                                                                           |
| ![](/img/user-manual/chapter22/22.jpg) | Show avatar shadows.                                                                                                                                                                                                                                                                                                                                                                                          |
| ![](/img/user-manual/chapter22/23.jpg) | Keep the camera level when tracking is enabled.                                                                                                                                                                                                                                                                                                                                                               |
| ![](/img/user-manual/chapter22/24.jpg) | Show laser pointers on tracked controllers.   

## Button Map

The Button Map can be found in the Settings window. It permits you to assign actions to controller buttons and gestures. It has two pages: **Button Events** and **Gesture Events**. For buttons, any controller input can be used. For gestures, you can use a predefined gesture or record your own one. The actions can also be predefined or based on custom scripts.

### Button Events

![](/img/user-manual/chapter22/23.jpg)

The **Button Events** page contains two lists of buttons: Application Global Buttons and Scene Event Buttons. Actions defined in the Application Global Buttons list will be active in any scene that you load, whereas actions defined in the Scene Event Buttons list will be active in the current scene only. The structure of the two lists is the same. If SteamVR is enabled, you can press the **Open SteamVR Bindings** button to access Steam's controller binding interface whilst immersed.

#### Columns

![](/img/user-manual/chapter22/24.jpg)

The lists are divided into 5 columns:

| Column | Description                                                                                                                                                                                                                                                                       |
|--------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Enable | Enable or disable the button and its action.                                                                                                                                                                                                                                      |
| Action | The action to trigger when a button is pressed. There are several preset actions to select from in the drop-down list. Click on the header to switch between A-Z and Z-A alphabetical ordering.                                                                                   |
| Button | The button that will trigger an action. Select the control and press any key, controller button, or mouse button to set it to what you pressed. Alternatively, select an option from the drop-down list. Click on the header to switch between A-Z and Z-A alphabetical ordering. |
| Script | Click on this button to open the script for an action in the Script Editor.                                                                                                                                                                                                       |
| Delete | Click on this button to delete an event.  

#### Add

Click on **Add Button** to add a new button to the end of a list.

#### Reset to Default

Click on **Reset to default** to reset all the mappings in a section to their default values. This will remove any custom mappings and restore the default mappings if they were deleted. A dialog will be shown to confirm that you wish to proceed.

### Gesture Events

![](/img/user-manual/chapter22/25.jpg)

The **Gesture Events** page contains two lists of gestures: Application Global Gestures and Scene Event Gestures. Actions defined in the Application Global Gestures list will be active in any scene that you load, whereas actions defined in the Scene Event Gestures list will be active in the current scene only. The structure of the two lists is the same.

#### Columns

![](/img/user-manual/chapter22/26.jpg)

The lists are divided into 5 columns:

| Column  | Description                                                                                                                                                                                    |
|---------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Enable  | Enable or disable the gesture and its action.                                                                                                                                                  |
| Action  | The action to trigger when a gesture is made. There are several pre-set actions to select from in the drop-down list. Click on the header to switch between A-Z and Z-A alphabetical ordering. |
| Gesture | The gesture that will trigger an action. The drop-down list contains gestures to select from. Click on the header to switch between A-Z and Z-A alphabetical ordering.                         |
| Script  | Click on this button to open the script for an action in the Script Editor.                                                                                                                    |
| Delete  | Click on this button to delete an event.                                                                                                                                                       |

#### Add

Click on **Add Gesture** to add a new gesture to the end of a list.

#### Reset to Default

Click on **Reset to default** to reset all the mappings in a section to their default values. This will remove any custom mappings and restore the default mappings if they were deleted. A dialog will be shown to confirm that you wish to proceed.

#### Recording a Gesture

![](/img/user-manual/chapter22/27.jpg)

The controls beneath each list can be used to record custom gestures and poses. Enter a name in the **Name** field then press the **Record Gesture** button to bring up the dialog shown below.

![](/img/user-manual/chapter22/28.jpg)

Press and hold Spacebar whilst moving your hand to create a gesture. The gesture should be something obvious like opening and closing a fist. Small or indistinct gestures will probably not be recognised. Once the gesture has been recorded, it will be added to the list of gestures in the drop-down lists.

#### Recording a Pose

![](/img/user-manual/chapter22/29.jpg)

Poses can be created in a similar manner to gestures. Enter a name in the **Name** field then press the **Record Pose** button to bring up the dialog shown below.

![](/img/user-manual/chapter22/30.jpg)

Unlike a gesture, a pose is a single position of the hand such as a thumbs up. Currently, the use of poses is more specialised and requires scripts to be written to link them to actions.
